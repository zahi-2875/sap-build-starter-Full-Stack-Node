"use strict";class peg$SyntaxError extends SyntaxError{constructor(t,e,u,r){super(t),this.expected=e,this.found=u,this.location=r,this.name="SyntaxError"}format(t){let e="Error: "+this.message;if(this.location){let u=null;const r=t.find(t=>t.source===this.location.source);r&&(u=r.text.split(/\r\n|\n|\r/g));const n=this.location.start,s=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(n):n,o=this.location.source+":"+s.line+":"+s.column;if(u){const t=this.location.end,r="".padEnd(s.line.toString().length," "),l=u[n.line-1],a=(n.line===t.line?t.column:l.length+1)-n.column||1;e+="\n --\x3e "+o+"\n"+r+" |\n"+s.line+" | "+l+"\n"+r+" | "+"".padEnd(n.column-1," ")+"".padEnd(a,"^")}else e+="\n at "+o}return e}static buildMessage(t,e){function u(t){return t.codePointAt(0).toString(16).toUpperCase()}const r=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function n(t){return r?t.replace(r,t=>"\\u{"+u(t)+"}"):t}function s(t){return n(t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,t=>"\\x0"+u(t)).replace(/[\x10-\x1F\x7F-\x9F]/g,t=>"\\x"+u(t)))}function o(t){return n(t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,t=>"\\x0"+u(t)).replace(/[\x10-\x1F\x7F-\x9F]/g,t=>"\\x"+u(t)))}const l={literal:t=>'"'+s(t.text)+'"',class(t){const e=t.parts.map(t=>Array.isArray(t)?o(t[0])+"-"+o(t[1]):o(t));return"["+(t.inverted?"^":"")+e.join("")+"]"+(t.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:t=>t.description};function a(t){return l[t.type](t)}return"Expected "+function(t){const e=t.map(a);if(e.sort(),e.length>0){let t=1;for(let u=1;u<e.length;u++)e[u-1]!==e[u]&&(e[t]=e[u],t++);e.length=t}switch(e.length){case 1:return e[0];case 2:return e[0]+" or "+e[1];default:return e.slice(0,-1).join(", ")+", or "+e[e.length-1]}}(t)+" but "+function(t){return t?'"'+s(t)+'"':"end of input"}(e)+" found."}}function peg$parse(t,e){const u={},r=(e=void 0!==e?e:{}).grammarSource,n={ODataRelativeURI:Yn};let s=Yn;const o="/",l="?",a="&",c="$count",i="$ref",f="$value",h="=",A="$skiptoken=",p="$search=",d="$select=",C="$compute=",g="$expand=",E="$filter=",b="$orderby=",F="$top=",m="$skip=",B="$count=",v="$apply=",y="$at",D="$from",x="$toInclusive",w="$to",$="*",L="/$count",S=";",T='"',j="\\\\",O='\\"',k=":",I="any",Z="all",_="asc",N="desc",R="$deltatoken=",z="'",P=",",q="[",H="]",M="@",Q="$format=",U="add",G="sub",J="mul",K="divby",V="div",W="-",X="eq",Y="ne",tt="lt",et="gt",ut="le",rt="ge",nt="in",st="null",ot="{",lt="}",at="contains",ct="endswith",it="startswith",ft="matchespattern",ht="not",At="and",pt="or",dt="aggregate",Ct="groupby",gt="filter",Et="search",bt="concat",Ft="top",mt="skip",Bt="orderby",vt="com.sap.vocabularies.Hierarchy.v1.TopLevels",yt="ancestors",Dt="descendants",xt="topcount",wt="bottomcount",$t="topsum",Lt="bottomsum",St="toppercent",Tt="bottompercent",jt="with",Ot="from",kt="as",It="rollup",Zt="$all",_t="identity",Nt="HierarchyNodes",Rt="$root/",zt="HierarchyQualifier",Pt="NodeProperty",qt="Levels",Ht="ExpandLevels",Mt='"NodeID"',Qt='"Levels"',Ut="filter(",Gt=")",Jt="search(",Kt="keep start",Vt="true",Wt="false",Xt="''",Yt="T",te=".",ee="Z",ue="e",re="binary'",ne="==",se="(",oe=/^[^&]/,le=/^[ ]/,ae=/^[^"&]/,ce=/^[^"]/,ie=/^[^;)]/,fe=/^[a-zA-Z0-9_.~![\]\-]/,he=/^[^}]/,Ae=/^[^\]]/,pe=/^[a-zA-Z]/,de=/^[^)]/,Ce=/^[^']/,ge=/^[a-zA-Z0-9]/,Ee=/^[0-9]/,be=/^[+\-]/,Fe=/^[_a-zA-Z]/,me=/^[_a-zA-Z0-9"."\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,Be=/^[0-9a-fA-F]/,ve=/^[^\/?]/,ye=/^[a-zA-Z0-9\-"."_~!$'()*+,;=:@"\/""?"]/,De=/^[a-zA-Z0-9_\-]/,xe=/^[ \t\n]/,we=Un("/",!1),$e=Un("?",!1),Le=Un("&",!1),Se=Un("$count",!1),Te=Un("$ref",!1),je=Un("$value",!1),Oe=Un("=",!1),ke=Un("$skiptoken=",!1),Ie=Un("$search=",!1),Ze=Un("$select=",!1),_e=Un("$compute=",!1),Ne=Un("$expand=",!1),Re=Un("$filter=",!1),ze=Un("$orderby=",!1),Pe=Un("$top=",!1),qe=Un("$skip=",!1),He=Un("$count=",!1),Me=Un("$apply=",!1),Qe=Gn(["&"],!0,!1,!1),Ue=Un("$at",!1),Ge=Un("$from",!1),Je=Un("$toInclusive",!1),Ke=Un("$to",!1),Ve=Un("*",!1),We=Un("/$count",!1),Xe=Un(";",!1),Ye=Gn([" "],!1,!1,!1),tu=Gn(['"',"&"],!0,!1,!1),eu=Un('"',!1),uu=Un("\\\\",!1),ru=Un('\\"',!1),nu=Gn(['"'],!0,!1,!1),su=Gn([";",")"],!0,!1,!1),ou=Un(":",!1),lu=Un("any",!1),au=Un("all",!1),cu=Un("asc",!1),iu=Un("desc",!1),fu=Un("$deltatoken=",!1),hu=Jn("value with double-quoted string"),Au=Un("'",!1),pu=Un(",",!1),du=Un("[",!1),Cu=Un("]",!1),gu=Gn([["a","z"],["A","Z"],["0","9"],"_",".","~","!","[","]","-"],!1,!1,!1),Eu=Jn("an aliased parameter (@param)"),bu=Un("@",!1),Fu=Un("$format=",!1),mu=Un("add",!1),Bu=Un("sub",!1),vu=Un("mul",!1),yu=Un("divby",!1),Du=Un("div",!1),xu=Un("-",!1),wu=Un("eq",!1),$u=Un("ne",!1),Lu=Un("lt",!1),Su=Un("gt",!1),Tu=Un("le",!1),ju=Un("ge",!1),Ou=Un("in",!1),ku=Jn("navigation with $count"),Iu=Jn("a reference"),Zu=Jn("null"),_u=Un("null",!1),Nu=Jn("a json object"),Ru=Un("{",!1),zu=Gn(["}"],!0,!1,!1),Pu=Un("}",!1),qu=Jn("a json array"),Hu=Gn(["]"],!0,!1,!1),Mu=Jn("a list"),Qu=Jn("a function name"),Uu=Gn([["a","z"],["A","Z"]],!1,!1,!1),Gu=Un("contains",!0),Ju=Un("endswith",!0),Ku=Un("startswith",!0),Vu=Un("matchespattern",!0),Wu=Un("NOT",!0),Xu=Un("AND",!0),Yu=Un("OR",!0),tr=Un("aggregate",!1),er=Un("groupby",!1),ur=Un("filter",!1),rr=Un("search",!1),nr=Un("concat",!1),sr=Un("top",!1),or=Un("skip",!1),lr=Un("orderby",!1),ar=Un("com.sap.vocabularies.Hierarchy.v1.TopLevels",!1),cr=Un("ancestors",!1),ir=Un("descendants",!1),fr=Un("topcount",!0),hr=Un("bottomcount",!0),Ar=Un("topsum",!0),pr=Un("bottomsum",!0),dr=Un("toppercent",!0),Cr=Un("bottompercent",!0),gr=Un("with",!1),Er=Un("from",!1),br=Un("as",!1),Fr=Un("rollup",!1),mr=Un("$all",!1),Br=Gn([")"],!0,!1,!1),vr=Un("identity",!1),yr=Un("HierarchyNodes",!1),Dr=Un("$root/",!1),xr=Un("HierarchyQualifier",!1),wr=Un("NodeProperty",!1),$r=Un("Levels",!1),Lr=Un("ExpandLevels",!1),Sr=Un('"NodeID"',!1),Tr=Un('"Levels"',!1),jr=Un("filter(",!1),Or=Un(")",!1),kr=Un("search(",!1),Ir=Un("keep start",!1),Zr=Jn("a boolean"),_r=Un("true",!1),Nr=Un("false",!1),Rr=Jn("a single quoted string"),zr=Un("''",!1),Pr=Gn(["'"],!0,!1,!1),qr=Jn("a doubled quoted string"),Hr=Jn("a string and/or number"),Mr=Gn([["a","z"],["A","Z"],["0","9"]],!1,!1,!1),Qr=Jn("a time"),Ur=Gn([["0","9"]],!1,!1,!1),Gr=Jn("a date"),Jr=Un("T",!1),Kr=Un(".",!1),Vr=Un("Z",!1),Wr=Gn(["+","-"],!1,!1,!1),Xr=Jn("a number"),Yr=Un("e",!1),tn=Jn("an integer"),en=Jn("an identifier"),un=Gn(["_",["a","z"],["A","Z"]],!1,!1,!1),rn=Gn(["_",["a","z"],["A","Z"],["0","9"],'"',".",'"',"ª","µ","º",["À","Ö"],["Ø","ö"],["ø","ˁ"],["ˆ","ˑ"],["ˠ","ˤ"],"ˬ","ˮ",["Ͱ","ʹ"],"Ͷ","ͷ",["ͺ","ͽ"],"Ά",["Έ","Ί"],"Ό",["Ύ","Ρ"],["Σ","ϵ"],["Ϸ","ҁ"],["Ҋ","ԧ"],["Ա","Ֆ"],"ՙ",["ա","և"],["א","ת"],["װ","ײ"],["ؠ","ي"],"ٮ","ٯ",["ٱ","ۓ"],"ە","ۥ","ۦ","ۮ","ۯ",["ۺ","ۼ"],"ۿ","ܐ",["ܒ","ܯ"],["ݍ","ޥ"],"ޱ",["ߊ","ߪ"],"ߴ","ߵ","ߺ",["ࠀ","ࠕ"],"ࠚ","ࠤ","ࠨ",["ࡀ","ࡘ"],"ࢠ",["ࢢ","ࢬ"],["ऄ","ह"],"ऽ","ॐ",["क़","ॡ"],["ॱ","ॷ"],["ॹ","ॿ"],["অ","ঌ"],"এ","ঐ",["ও","ন"],["প","র"],"ল",["শ","হ"],"ঽ","ৎ","ড়","ঢ়",["য়","ৡ"],"ৰ","ৱ",["ਅ","ਊ"],"ਏ","ਐ",["ਓ","ਨ"],["ਪ","ਰ"],"ਲ","ਲ਼","ਵ","ਸ਼","ਸ","ਹ",["ਖ਼","ੜ"],"ਫ਼",["ੲ","ੴ"],["અ","ઍ"],["એ","ઑ"],["ઓ","ન"],["પ","ર"],"લ","ળ",["વ","હ"],"ઽ","ૐ","ૠ","ૡ",["ଅ","ଌ"],"ଏ","ଐ",["ଓ","ନ"],["ପ","ର"],"ଲ","ଳ",["ଵ","ହ"],"ଽ","ଡ଼","ଢ଼",["ୟ","ୡ"],"ୱ","ஃ",["அ","ஊ"],["எ","ஐ"],["ஒ","க"],"ங","ச","ஜ","ஞ","ட","ண","த",["ந","ப"],["ம","ஹ"],"ௐ",["అ","ఌ"],["ఎ","ఐ"],["ఒ","న"],["ప","ళ"],["వ","హ"],"ఽ","ౘ","ౙ","ౠ","ౡ",["ಅ","ಌ"],["ಎ","ಐ"],["ಒ","ನ"],["ಪ","ಳ"],["ವ","ಹ"],"ಽ","ೞ","ೠ","ೡ","ೱ","ೲ",["അ","ഌ"],["എ","ഐ"],["ഒ","ഺ"],"ഽ","ൎ","ൠ","ൡ",["ൺ","ൿ"],["අ","ඖ"],["ක","න"],["ඳ","ර"],"ල",["ව","ෆ"],["ก","ะ"],"า","ำ",["เ","ๆ"],"ກ","ຂ","ຄ","ງ","ຈ","ຊ","ຍ",["ດ","ທ"],["ນ","ຟ"],["ມ","ຣ"],"ລ","ວ","ສ","ຫ",["ອ","ະ"],"າ","ຳ","ຽ",["ເ","ໄ"],"ໆ",["ໜ","ໟ"],"ༀ",["ཀ","ཇ"],["ཉ","ཬ"],["ྈ","ྌ"],["က","ဪ"],"ဿ",["ၐ","ၕ"],["ၚ","ၝ"],"ၡ","ၥ","ၦ",["ၮ","ၰ"],["ၵ","ႁ"],"ႎ",["Ⴀ","Ⴥ"],"Ⴧ","Ⴭ",["ა","ჺ"],["ჼ","ቈ"],["ቊ","ቍ"],["ቐ","ቖ"],"ቘ",["ቚ","ቝ"],["በ","ኈ"],["ኊ","ኍ"],["ነ","ኰ"],["ኲ","ኵ"],["ኸ","ኾ"],"ዀ",["ዂ","ዅ"],["ወ","ዖ"],["ዘ","ጐ"],["ጒ","ጕ"],["ጘ","ፚ"],["ᎀ","ᎏ"],["Ꭰ","Ᏼ"],["ᐁ","ᙬ"],["ᙯ","ᙿ"],["ᚁ","ᚚ"],["ᚠ","ᛪ"],["ᜀ","ᜌ"],["ᜎ","ᜑ"],["ᜠ","ᜱ"],["ᝀ","ᝑ"],["ᝠ","ᝬ"],["ᝮ","ᝰ"],["ក","ឳ"],"ៗ","ៜ",["ᠠ","ᡷ"],["ᢀ","ᢨ"],"ᢪ",["ᢰ","ᣵ"],["ᤀ","ᤜ"],["ᥐ","ᥭ"],["ᥰ","ᥴ"],["ᦀ","ᦫ"],["ᧁ","ᧇ"],["ᨀ","ᨖ"],["ᨠ","ᩔ"],"ᪧ",["ᬅ","ᬳ"],["ᭅ","ᭋ"],["ᮃ","ᮠ"],"ᮮ","ᮯ",["ᮺ","ᯥ"],["ᰀ","ᰣ"],["ᱍ","ᱏ"],["ᱚ","ᱽ"],["ᳩ","ᳬ"],["ᳮ","ᳱ"],"ᳵ","ᳶ",["ᴀ","ᶿ"],["Ḁ","ἕ"],["Ἐ","Ἕ"],["ἠ","ὅ"],["Ὀ","Ὅ"],["ὐ","ὗ"],"Ὑ","Ὓ","Ὕ",["Ὗ","ώ"],["ᾀ","ᾴ"],["ᾶ","ᾼ"],"ι",["ῂ","ῄ"],["ῆ","ῌ"],["ῐ","ΐ"],["ῖ","Ί"],["ῠ","Ῥ"],["ῲ","ῴ"],["ῶ","ῼ"],"ⁱ","ⁿ",["ₐ","ₜ"],"ℂ","ℇ",["ℊ","ℓ"],"ℕ",["ℙ","ℝ"],"ℤ","Ω","ℨ",["K","ℭ"],["ℯ","ℹ"],["ℼ","ℿ"],["ⅅ","ⅉ"],"ⅎ","Ↄ","ↄ",["Ⰰ","Ⱞ"],["ⰰ","ⱞ"],["Ⱡ","ⳤ"],["Ⳬ","ⳮ"],"Ⳳ","ⳳ",["ⴀ","ⴥ"],"ⴧ","ⴭ",["ⴰ","ⵧ"],"ⵯ",["ⶀ","ⶖ"],["ⶠ","ⶦ"],["ⶨ","ⶮ"],["ⶰ","ⶶ"],["ⶸ","ⶾ"],["ⷀ","ⷆ"],["ⷈ","ⷎ"],["ⷐ","ⷖ"],["ⷘ","ⷞ"],"ⸯ","々","〆",["〱","〵"],"〻","〼",["ぁ","ゖ"],["ゝ","ゟ"],["ァ","ヺ"],["ー","ヿ"],["ㄅ","ㄭ"],["ㄱ","ㆎ"],["ㆠ","ㆺ"],["ㇰ","ㇿ"],["㐀","䶵"],["一","鿌"],["ꀀ","ꒌ"],["ꓐ","ꓽ"],["ꔀ","ꘌ"],["ꘐ","ꘟ"],"ꘪ","ꘫ",["Ꙁ","ꙮ"],["ꙿ","ꚗ"],["ꚠ","ꛥ"],["ꜗ","ꜟ"],["Ꜣ","ꞈ"],["Ꞌ","ꞎ"],["Ꞑ","ꞓ"],["Ꞡ","Ɦ"],["ꟸ","ꠁ"],["ꠃ","ꠅ"],["ꠇ","ꠊ"],["ꠌ","ꠢ"],["ꡀ","ꡳ"],["ꢂ","ꢳ"],["ꣲ","ꣷ"],"ꣻ",["ꤊ","ꤥ"],["ꤰ","ꥆ"],["ꥠ","ꥼ"],["ꦄ","ꦲ"],"ꧏ",["ꨀ","ꨨ"],["ꩀ","ꩂ"],["ꩄ","ꩋ"],["ꩠ","ꩶ"],"ꩺ",["ꪀ","ꪯ"],"ꪱ","ꪵ","ꪶ",["ꪹ","ꪽ"],"ꫀ","ꫂ",["ꫛ","ꫝ"],["ꫠ","ꫪ"],["ꫲ","ꫴ"],["ꬁ","ꬆ"],["ꬉ","ꬎ"],["ꬑ","ꬖ"],["ꬠ","ꬦ"],["ꬨ","ꬮ"],["ꯀ","ꯢ"],["가","힣"],["ힰ","ퟆ"],["ퟋ","ퟻ"],["豈","舘"],["並","龎"],["ﬀ","ﬆ"],["ﬓ","ﬗ"],"יִ",["ײַ","ﬨ"],["שׁ","זּ"],["טּ","לּ"],"מּ","נּ","סּ","ףּ","פּ",["צּ","ﮱ"],["ﯓ","ﴽ"],["ﵐ","ﶏ"],["ﶒ","ﷇ"],["ﷰ","ﷻ"],["ﹰ","ﹴ"],["ﹶ","ﻼ"],["Ａ","Ｚ"],["ａ","ｚ"],["ｦ","ﾾ"],["ￂ","ￇ"],["ￊ","ￏ"],["ￒ","ￗ"],["ￚ","ￜ"]],!1,!1,!1),nn=Jn("a guid"),sn=Jn("a hex value"),on=Gn([["0","9"],["a","f"],["A","F"]],!1,!1,!1),ln=Gn(["/","?"],!0,!1,!1),an=Gn([["a","z"],["A","Z"],["0","9"],"-",'"',".",'"',"_","~","!","$","'","(",")","*","+",",",";","=",":","@",'"',"/",'"','"',"?",'"'],!1,!1,!1),cn=Jn("a binary"),fn=Un("binary'",!1),hn=Gn([["a","z"],["A","Z"],["0","9"],"_","-"],!1,!1,!1),An=Un("==",!1),pn=Un("(",!1),dn=Gn([" ","\t","\n"],!1,!1,!1),Cn=Jn("a whitespace");function gn(t,e,u){return u}function En(t,e){ko(e)}function bn(t){return t}function Fn(t,e,u){t.push(e,...u)}function mn(t,e){t.push(e)}function Bn(t,e,u){t.push(e,...u)}function vn(t,e){return e}function yn(t,e,u){return{op:e,operand:u}}function Dn(t,e){return e}function xn(t,e){return e?{id:t,where:e}:t}function wn(t,e){return e}function $n(t,e){return e}function Ln(t,e){return e}function Sn(t,e){return[t,...e]}function Tn(t,e){return e}function jn(t,e){return e}function On(t,e){return e}function kn(t,e){return e}function In(t,e){return e}function Zn(t,e){return e}function _n(t,e){return e}function Nn(t,e){return e}let Rn=0|e.peg$currPos,zn=Rn;const Pn=[{line:1,column:1}];let qn,Hn=Rn,Mn=e.peg$maxFailExpected||[],Qn=0|e.peg$silentFails;if(e.startRule){if(!(e.startRule in n))throw new Error("Can't start parsing from rule \""+e.startRule+'".');s=n[e.startRule]}function Un(t,e){return{type:"literal",text:t,ignoreCase:e}}function Gn(t,e,u,r){return{type:"class",parts:t,inverted:e,ignoreCase:u,unicode:r}}function Jn(t){return{type:"other",description:t}}function Kn(e){let u,r=Pn[e];if(r)return r;if(e>=Pn.length)u=Pn.length-1;else for(u=e;!Pn[--u];);for(r=Pn[u],r={line:r.line,column:r.column};u<e;)10===t.charCodeAt(u)?(r.line++,r.column=1):r.column++,u++;return Pn[e]=r,r}function Vn(t,e,u){const n=Kn(t),s=Kn(e),o={source:r,start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:s.line,column:s.column}};return u&&r&&"function"==typeof r.offset&&(o.start=r.offset(o.start),o.end=r.offset(o.end)),o}function Wn(t){Rn<Hn||(Rn>Hn&&(Hn=Rn,Mn=[]),Mn.push(t))}function Xn(t,e,u){return new peg$SyntaxError(peg$SyntaxError.buildMessage(t,e),t,e,u)}function Yn(){let e,r,n,s,c,i,f,h,A,p,d,C,g,E,b,F,m;if(e=Rn,47===t.charCodeAt(Rn)?(r=o,Rn++):(r=u,0===Qn&&Wn(we)),r===u&&(r=null),n=Rn,s=ts(),s!==u&&(zn=n,s=void(bo=s)),n=s,n!==u){if(s=Rn,c=co(),63===t.charCodeAt(Rn)?(i=l,Rn++):(i=u,0===Qn&&Wn($e)),i!==u){if(f=co(),h=Rn,38===t.charCodeAt(Rn)?(A=a,Rn++):(A=u,0===Qn&&Wn(Le)),A===u&&(A=null),p=co(),d=ns(),d!==u){if(C=[],g=Rn,E=co(),b=[],38===t.charCodeAt(Rn)?(F=a,Rn++):(F=u,0===Qn&&Wn(Le)),F!==u)for(;F!==u;)b.push(F),38===t.charCodeAt(Rn)?(F=a,Rn++):(F=u,0===Qn&&Wn(Le));else b=u;for(b!==u?(F=co(),m=ns(),m!==u?(E=[E,b,F,m],g=E):(Rn=g,g=u)):(Rn=g,g=u);g!==u;){if(C.push(g),g=Rn,E=co(),b=[],38===t.charCodeAt(Rn)?(F=a,Rn++):(F=u,0===Qn&&Wn(Le)),F!==u)for(;F!==u;)b.push(F),38===t.charCodeAt(Rn)?(F=a,Rn++):(F=u,0===Qn&&Wn(Le));else b=u;b!==u?(F=co(),m=ns(),m!==u?(E=[E,b,F,m],g=E):(Rn=g,g=u)):(Rn=g,g=u)}A=[A,p,d,C],h=A}else Rn=h,h=u;h===u&&(h=null),c=[c,i,f,h],s=c}else Rn=s,s=u;s===u&&(s=null),c=co(),zn=e,e=function(){if(Fo)return bo.columns=[{args:[{val:1}],as:"$count",func:"count"}],delete bo.expand,delete bo.limit,delete bo.orderBy,bo.apply?So(bo,bo.apply):{SELECT:bo};let t;if(bo.expand){bo.columns||(bo.columns=["*"],t=!0);for(const t of bo.expand){const e=bo.columns.findIndex(yo(t));e>-1&&bo.columns.splice(e,1),bo.columns.push(t)}delete bo.expand}return bo.count&&bo.apply&&(bo.__countAggregated=!0),bo.apply?So(bo,bo.apply,t):(bo.compute&&Po(bo),{SELECT:bo})}()}else Rn=e,e=u;return e}function ts(){let e,r,n,s,l,a,h;var A;return e=Rn,t.substr(Rn,6)===c?(r=c,Rn+=6):(r=u,0===Qn&&Wn(Se)),r!==u&&(zn=e,r=void(Fo=!0)),e=r,e===u&&(e=Rn,r=Rn,t.substr(Rn,4)===i?(n=i,Rn+=4):(n=u,0===Qn&&Wn(Te)),n===u&&(t.substr(Rn,6)===f?(n=f,Rn+=6):(n=u,0===Qn&&Wn(je))),r=n!==u?t.substring(r,Rn):n,r!==u&&(zn=e,A=r,r=!fo.includes(A)&&{from:{ref:[A]}}),e=r,e===u&&(e=Rn,r=Rn,n=uo(),n!==u?(s=Rn,l=lo(),l!==u?(a=ao(),a!==u?(l=[l,a],s=l):(Rn=s,s=u)):(Rn=s,s=u),s===u&&(s=Rn,l=lo(),l!==u?(a=us(),a!==u?(h=ao(),h!==u?(l=[l,a,h],s=l):(Rn=s,s=u)):(Rn=s,s=u)):(Rn=s,s=u)),s===u&&(s=null),l=Rn,Qn++,a=so(),Qn--,a===u?l=void 0:(Rn=l,l=u),l!==u?(n=[n,s,l],r=n):(Rn=r,r=u)):(Rn=r,r=u),r===u&&(r=Rn,n=so(),n!==u&&(zn=r,n=[n]),r=n),r===u&&(r=null),n=Rn,s=Rn,47===t.charCodeAt(Rn)?(l=o,Rn++):(l=u,0===Qn&&Wn(we)),l!==u&&(zn=s,l=l),s=l,s!==u?(l=ts(),l===u&&(l=null),s=[s,l],n=s):(Rn=n,n=u),n===u&&(n=null),zn=e,e=function(t,e){if(e=e&&e[1],!t&&!e)return{from:{ref:[""]}};if(!t&&e&&e.from)return e.from.ref.unshift(""),e;const[u,r]=t,n=[];if(r?r.length>2?n.push({id:u,where:r[1].map(t=>t.val&&t.val.match&&t.val.match(/^"(.*)"$/)?{val:t.val.match(/^"(.*)"$/)[1]}:t)}):n.push({id:u,where:[]}):go?n.push(`${"object"==typeof u&&"val"in u?u.val:u}`):"object"==typeof u&&"string"==typeof u.val&&u.val.match(/^[1-9]\d*$|^0$/)?n.push({val:mo(u.val)}):n.push(u),e&&e.from){const t=e.from.ref;Object.prototype.hasOwnProperty.call(t[0],"val")&&(n[n.length-1]={id:n[n.length-1],where:[t.shift()]}),n.push(...t)}const s={from:{ref:n}};return e&&e.columns&&(s.columns=e.columns),s}(r,n))),e}function es(){let e,r,n,s,o,l,a,c,i;return e=Rn,r=Ls(),r!==u&&(zn=e,r=[r]),e=r,e===u&&(e=Rn,r=$s(),r!==u?(n=co(),61===t.charCodeAt(Rn)?(s=h,Rn++):(s=u,0===Qn&&Wn(Oe)),s!==u?(o=co(),l=Ls(),l!==u?(a=Rn,c=oo(),c!==u?(i=es(),i!==u?(c=[c,i],a=c):(Rn=a,a=u)):(Rn=a,a=u),a===u&&(a=null),zn=e,e=function(t,e,u){const r=[t,"=",e];return u&&r.push("and",...u[1]),r}(r,l,a)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u)),e}function us(){let e,r,n,s,o,l,a,c,i;return e=Rn,r=$s(),r!==u?(n=co(),61===t.charCodeAt(Rn)?(s=h,Rn++):(s=u,0===Qn&&Wn(Oe)),s!==u?(o=co(),l=Ss(),l!==u?(a=Rn,c=oo(),c!==u?(i=us(),i!==u?(c=[c,i],a=c):(Rn=a,a=u)):(Rn=a,a=u),a===u&&(a=null),zn=e,e=function(t,e,u){const r=[t,"=",e];return u&&r.push("and",...u[1]),r}(r,l,a)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u),e===u&&(e=Rn,r=Ss(),r!==u&&(zn=e,r=[r]),e=r),e}function rs(){let e,r,n,s,l,a,c;if(e=Rn,r=uo(),r!==u){for(n=Rn,s=lo(),s!==u?(l=ao(),l!==u?(s=[s,l],n=s):(Rn=n,n=u)):(Rn=n,n=u),n===u&&(n=Rn,s=lo(),s!==u?(l=es(),l!==u?(a=ao(),a!==u?(zn=n,n=l):(Rn=n,n=u)):(Rn=n,n=u)):(Rn=n,n=u)),n===u&&(n=null),s=[],l=Rn,47===t.charCodeAt(Rn)?(a=o,Rn++):(a=u,0===Qn&&Wn(we)),a!==u?(c=rs(),c!==u?(zn=l,l=gn(0,0,c)):(Rn=l,l=u)):(Rn=l,l=u);l!==u;)s.push(l),l=Rn,47===t.charCodeAt(Rn)?(a=o,Rn++):(a=u,0===Qn&&Wn(we)),a!==u?(c=rs(),c!==u?(zn=l,l=gn(0,0,c)):(Rn=l,l=u)):(Rn=l,l=u);zn=e,e=function(t,e,u){const r=[e?{id:t,where:e}:t];return u.length&&r.push(...u.map(t=>t.from.ref[0])),{from:{ref:r}}}(r,n,s)}else Rn=e,e=u;return e}function ns(){let e,r,n,s;var o,l;return e=Rn,t.substr(Rn,11)===A?(r=A,Rn+=11):(r=u,0===Qn&&Wn(ke)),r!==u?(n=co(),s=function(){let e,r;e=Rn,r=function(){let e,r,n;e=Rn,r=[],n=t.charAt(Rn),ye.test(n)?Rn++:(n=u,0===Qn&&Wn(an));if(n!==u)for(;n!==u;)r.push(n),n=t.charAt(Rn),ye.test(n)?Rn++:(n=u,0===Qn&&Wn(an));else r=u;e=r!==u?t.substring(e,Rn):r;return e}(),r===u&&(r=null);return zn=e,r=function(t){Bo(t,{SELECT:bo})}(r),e=r,e}(),r=[r,n,s],e=r):(Rn=e,e=u),e===u&&(e=Rn,t.substr(Rn,8)===p?(r=p,Rn+=8):(r=u,0===Qn&&Wn(Ie)),r!==u?(n=co(),s=function(){let e,r;e=Rn,r=function(){let e,r,n,s,o,l,a,c,i,f,h,A;e=Rn,r=Rn,n=[],s=Rn,o=Rn,l=[],a=t.charAt(Rn),le.test(a)?Rn++:(a=u,0===Qn&&Wn(Ye));for(;a!==u;)l.push(a),a=t.charAt(Rn),le.test(a)?Rn++:(a=u,0===Qn&&Wn(Ye));o=t.substring(o,Rn),l=[],a=t.charAt(Rn),ae.test(a)?Rn++:(a=u,0===Qn&&Wn(tu));if(a!==u)for(;a!==u;)l.push(a),a=t.charAt(Rn),ae.test(a)?Rn++:(a=u,0===Qn&&Wn(tu));else l=u;if(l===u){if(l=[],a=Rn,34===t.charCodeAt(Rn)?(c=T,Rn++):(c=u,0===Qn&&Wn(eu)),c!==u){if(i=[],t.substr(Rn,2)===j?(f=j,Rn+=2):(f=u,0===Qn&&Wn(uu)),f===u&&(t.substr(Rn,2)===O?(f=O,Rn+=2):(f=u,0===Qn&&Wn(ru)),f===u&&(f=t.charAt(Rn),ce.test(f)?Rn++:(f=u,0===Qn&&Wn(nu)))),f!==u)for(;f!==u;)i.push(f),t.substr(Rn,2)===j?(f=j,Rn+=2):(f=u,0===Qn&&Wn(uu)),f===u&&(t.substr(Rn,2)===O?(f=O,Rn+=2):(f=u,0===Qn&&Wn(ru)),f===u&&(f=t.charAt(Rn),ce.test(f)?Rn++:(f=u,0===Qn&&Wn(nu))));else i=u;if(i!==u)if(34===t.charCodeAt(Rn)?(f=T,Rn++):(f=u,0===Qn&&Wn(eu)),f!==u){for(h=[],A=t.charAt(Rn),le.test(A)?Rn++:(A=u,0===Qn&&Wn(Ye));A!==u;)h.push(A),A=t.charAt(Rn),le.test(A)?Rn++:(A=u,0===Qn&&Wn(Ye));c=[c,i,f,h],a=c}else Rn=a,a=u;else Rn=a,a=u}else Rn=a,a=u;if(a!==u)for(;a!==u;)if(l.push(a),a=Rn,34===t.charCodeAt(Rn)?(c=T,Rn++):(c=u,0===Qn&&Wn(eu)),c!==u){if(i=[],t.substr(Rn,2)===j?(f=j,Rn+=2):(f=u,0===Qn&&Wn(uu)),f===u&&(t.substr(Rn,2)===O?(f=O,Rn+=2):(f=u,0===Qn&&Wn(ru)),f===u&&(f=t.charAt(Rn),ce.test(f)?Rn++:(f=u,0===Qn&&Wn(nu)))),f!==u)for(;f!==u;)i.push(f),t.substr(Rn,2)===j?(f=j,Rn+=2):(f=u,0===Qn&&Wn(uu)),f===u&&(t.substr(Rn,2)===O?(f=O,Rn+=2):(f=u,0===Qn&&Wn(ru)),f===u&&(f=t.charAt(Rn),ce.test(f)?Rn++:(f=u,0===Qn&&Wn(nu))));else i=u;if(i!==u)if(34===t.charCodeAt(Rn)?(f=T,Rn++):(f=u,0===Qn&&Wn(eu)),f!==u){for(h=[],A=t.charAt(Rn),le.test(A)?Rn++:(A=u,0===Qn&&Wn(Ye));A!==u;)h.push(A),A=t.charAt(Rn),le.test(A)?Rn++:(A=u,0===Qn&&Wn(Ye));c=[c,i,f,h],a=c}else Rn=a,a=u;else Rn=a,a=u}else Rn=a,a=u;else l=u}l!==u?(o=[o,l],s=o):(Rn=s,s=u);if(s!==u)for(;s!==u;){for(n.push(s),s=Rn,o=Rn,l=[],a=t.charAt(Rn),le.test(a)?Rn++:(a=u,0===Qn&&Wn(Ye));a!==u;)l.push(a),a=t.charAt(Rn),le.test(a)?Rn++:(a=u,0===Qn&&Wn(Ye));if(o=t.substring(o,Rn),l=[],a=t.charAt(Rn),ae.test(a)?Rn++:(a=u,0===Qn&&Wn(tu)),a!==u)for(;a!==u;)l.push(a),a=t.charAt(Rn),ae.test(a)?Rn++:(a=u,0===Qn&&Wn(tu));else l=u;if(l===u){if(l=[],a=Rn,34===t.charCodeAt(Rn)?(c=T,Rn++):(c=u,0===Qn&&Wn(eu)),c!==u){if(i=[],t.substr(Rn,2)===j?(f=j,Rn+=2):(f=u,0===Qn&&Wn(uu)),f===u&&(t.substr(Rn,2)===O?(f=O,Rn+=2):(f=u,0===Qn&&Wn(ru)),f===u&&(f=t.charAt(Rn),ce.test(f)?Rn++:(f=u,0===Qn&&Wn(nu)))),f!==u)for(;f!==u;)i.push(f),t.substr(Rn,2)===j?(f=j,Rn+=2):(f=u,0===Qn&&Wn(uu)),f===u&&(t.substr(Rn,2)===O?(f=O,Rn+=2):(f=u,0===Qn&&Wn(ru)),f===u&&(f=t.charAt(Rn),ce.test(f)?Rn++:(f=u,0===Qn&&Wn(nu))));else i=u;if(i!==u)if(34===t.charCodeAt(Rn)?(f=T,Rn++):(f=u,0===Qn&&Wn(eu)),f!==u){for(h=[],A=t.charAt(Rn),le.test(A)?Rn++:(A=u,0===Qn&&Wn(Ye));A!==u;)h.push(A),A=t.charAt(Rn),le.test(A)?Rn++:(A=u,0===Qn&&Wn(Ye));c=[c,i,f,h],a=c}else Rn=a,a=u;else Rn=a,a=u}else Rn=a,a=u;if(a!==u)for(;a!==u;)if(l.push(a),a=Rn,34===t.charCodeAt(Rn)?(c=T,Rn++):(c=u,0===Qn&&Wn(eu)),c!==u){if(i=[],t.substr(Rn,2)===j?(f=j,Rn+=2):(f=u,0===Qn&&Wn(uu)),f===u&&(t.substr(Rn,2)===O?(f=O,Rn+=2):(f=u,0===Qn&&Wn(ru)),f===u&&(f=t.charAt(Rn),ce.test(f)?Rn++:(f=u,0===Qn&&Wn(nu)))),f!==u)for(;f!==u;)i.push(f),t.substr(Rn,2)===j?(f=j,Rn+=2):(f=u,0===Qn&&Wn(uu)),f===u&&(t.substr(Rn,2)===O?(f=O,Rn+=2):(f=u,0===Qn&&Wn(ru)),f===u&&(f=t.charAt(Rn),ce.test(f)?Rn++:(f=u,0===Qn&&Wn(nu))));else i=u;if(i!==u)if(34===t.charCodeAt(Rn)?(f=T,Rn++):(f=u,0===Qn&&Wn(eu)),f!==u){for(h=[],A=t.charAt(Rn),le.test(A)?Rn++:(A=u,0===Qn&&Wn(Ye));A!==u;)h.push(A),A=t.charAt(Rn),le.test(A)?Rn++:(A=u,0===Qn&&Wn(Ye));c=[c,i,f,h],a=c}else Rn=a,a=u;else Rn=a,a=u}else Rn=a,a=u;else l=u}l!==u?(o=[o,l],s=o):(Rn=s,s=u)}else n=u;r=n!==u?t.substring(r,Rn):n;r!==u&&(zn=e,r=[{val:r}]);return e=r,e}(),r!==u&&(zn=e);e=r,e===u&&(e=co());return e}(),s!==u?(zn=e,e=void((l=s)&&(bo.search=l))):(Rn=e,e=u)):(Rn=e,e=u),e===u&&(e=Rn,r=ss(),r!==u&&(zn=e,r=void((o=r)&&o.apply&&(bo.apply=o.apply))),e=r,e===u&&(e=function(){let e,r,n,s;e=Rn,t.substr(Rn,3)===y?(r=y,Rn+=3):(r=u,0===Qn&&Wn(Ue));r===u&&(t.substr(Rn,5)===D?(r=D,Rn+=5):(r=u,0===Qn&&Wn(Ge)),r===u&&(t.substr(Rn,12)===x?(r=x,Rn+=12):(r=u,0===Qn&&Wn(Je)),r===u&&(t.substr(Rn,3)===w?(r=w,Rn+=3):(r=u,0===Qn&&Wn(Ke)))));r!==u?(61===t.charCodeAt(Rn)?(n=h,Rn++):(n=u,0===Qn&&Wn(Oe)),n!==u?(s=to(),s!==u?(r=[r,n,s],e=r):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u);return e}(),e===u&&(e=function(){let e,r,n,s,o;e=Rn,t.substr(Rn,8)===Q?(r=Q,Rn+=8):(r=u,0===Qn&&Wn(Fu));if(r!==u){for(n=Rn,s=[],o=t.charAt(Rn),oe.test(o)?Rn++:(o=u,0===Qn&&Wn(Qe));o!==u;)s.push(o),o=t.charAt(Rn),oe.test(o)?Rn++:(o=u,0===Qn&&Wn(Qe));n=t.substring(n,Rn),zn=e,e=function(t){if("json"!==t.toLowerCase()){const t=new Error('Only query parameter "json" is allowed in "$format".');throw t.statusCode=501,t}}(n)}else Rn=e,e=u;return e}(),e===u&&(e=function(){let e,r,n,s,o,l;e=Rn,r=Rn,n=[],s=t.charAt(Rn),fe.test(s)?Rn++:(s=u,0===Qn&&Wn(gu));if(s!==u)for(;s!==u;)n.push(s),s=t.charAt(Rn),fe.test(s)?Rn++:(s=u,0===Qn&&Wn(gu));else n=u;r=n!==u?t.substring(r,Rn):n;if(r!==u){for(61===t.charCodeAt(Rn)?(n=h,Rn++):(n=u,0===Qn&&Wn(Oe)),n===u&&(n=null),s=Rn,o=[],l=t.charAt(Rn),oe.test(l)?Rn++:(l=u,0===Qn&&Wn(Qe));l!==u;)o.push(l),l=t.charAt(Rn),oe.test(l)?Rn++:(l=u,0===Qn&&Wn(Qe));s=t.substring(s,Rn),zn=e,e=Zo(r,s)}else Rn=e,e=u;return e}(),e===u&&(e=function(){let e,r,n,s,o;e=Rn,r=ms(),r!==u?(61===t.charCodeAt(Rn)?(n=h,Rn++):(n=u,0===Qn&&Wn(Oe)),n!==u?(s=Rn,Qn++,o=ms(),Qn--,o===u?s=void 0:(Rn=s,s=u),s!==u?(o=function(){let e,r,n,s;e=Ls(),e===u&&(e=js(),e===u&&(e=Os(),e===u&&(e=Rn,91===t.charCodeAt(Rn)?(r=q,Rn++):(r=u,0===Qn&&Wn(du)),r!==u?(n=function(){let e,r,n,s,o,l;if(e=Rn,r=Fs(),r!==u){for(n=[],s=Rn,44===t.charCodeAt(Rn)?(o=P,Rn++):(o=u,0===Qn&&Wn(pu)),o!==u?(l=Fs(),l!==u?(zn=s,s=vn(0,l)):(Rn=s,s=u)):(Rn=s,s=u);s!==u;)n.push(s),s=Rn,44===t.charCodeAt(Rn)?(o=P,Rn++):(o=u,0===Qn&&Wn(pu)),o!==u?(l=Fs(),l!==u?(zn=s,s=vn(0,l)):(Rn=s,s=u)):(Rn=s,s=u);zn=e,a=n,e=[r,...a]}else Rn=e,e=u;var a;return e}(),n!==u?(93===t.charCodeAt(Rn)?(s=H,Rn++):(s=u,0===Qn&&Wn(Cu)),s!==u?(zn=e,e={list:n}):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u))));return e}(),o!==u?(zn=e,e=void(No(bo,l=r,a=o)||(a.val?a=a.val:a.list&&Array.isArray(a.list)&&(a=a.list.map(t=>t.val)),Zo(l,a)))):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u);var l,a;return e}(),e===u&&(e=function(){let e,r,n,s,o;e=Rn,t.substr(Rn,12)===R?(r=R,Rn+=12):(r=u,0===Qn&&Wn(fu));if(r!==u){for(n=co(),s=[],o=t.charAt(Rn),oe.test(o)?Rn++:(o=u,0===Qn&&Wn(Qe));o!==u;)s.push(o),o=t.charAt(Rn),oe.test(o)?Rn++:(o=u,0===Qn&&Wn(Qe));zn=e,e=s}else Rn=e,e=u;return e}()))))))),e}function ss(){let e,r,n,s,o,l,a,c;if(e=Rn,t.substr(Rn,8)===d?(r=d,Rn+=8):(r=u,0===Qn&&Wn(Ze)),r!==u)if(n=co(),s=os(),s!==u){for(o=[],l=Rn,a=oo(),a!==u?(c=os(),c!==u?(a=[a,c],l=a):(Rn=l,l=u)):(Rn=l,l=u);l!==u;)o.push(l),l=Rn,a=oo(),a!==u?(c=os(),c!==u?(a=[a,c],l=a):(Rn=l,l=u)):(Rn=l,l=u);r=[r,n,s,o],e=r}else Rn=e,e=u;else Rn=e,e=u;if(e===u){if(e=Rn,t.substr(Rn,9)===C?(r=C,Rn+=9):(r=u,0===Qn&&Wn(_e)),r!==u)if(n=co(),s=As(),s!==u){for(o=[],l=Rn,a=oo(),a!==u?(c=As(),c!==u?(a=[a,c],l=a):(Rn=l,l=u)):(Rn=l,l=u);l!==u;)o.push(l),l=Rn,a=oo(),a!==u?(c=As(),c!==u?(a=[a,c],l=a):(Rn=l,l=u)):(Rn=l,l=u);r=[r,n,s,o],e=r}else Rn=e,e=u;else Rn=e,e=u;if(e===u){if(e=Rn,t.substr(Rn,8)===g?(r=g,Rn+=8):(r=u,0===Qn&&Wn(Ne)),r!==u)if(n=co(),s=cs(),s!==u){for(o=[],l=Rn,a=oo(),a!==u?(c=cs(),c!==u?(a=[a,c],l=a):(Rn=l,l=u)):(Rn=l,l=u);l!==u;)o.push(l),l=Rn,a=oo(),a!==u?(c=cs(),c!==u?(a=[a,c],l=a):(Rn=l,l=u)):(Rn=l,l=u);l=function(){let e,r;e=Rn,t.substr(Rn,7)===L?(r=L,Rn+=7):(r=u,0===Qn&&Wn(We));r!==u&&(zn=e,r=function(){const t=new Error('"/$count" is not supported for expand operation');throw t.statusCode=501,t}());return e=r,e}(),l===u&&(l=null),r=[r,n,s,o,l],e=r}else Rn=e,e=u;else Rn=e,e=u;if(e===u&&(e=Rn,t.substr(Rn,8)===E?(r=E,Rn+=8):(r=u,0===Qn&&Wn(Re)),r!==u?(n=co(),s=ps(),s!==u?(zn=e,h=s,e=void(bo.where=h)):(Rn=e,e=u)):(Rn=e,e=u),e===u)){if(e=Rn,t.substr(Rn,9)===b?(r=b,Rn+=9):(r=u,0===Qn&&Wn(ze)),r!==u)if(n=co(),s=bs(),s!==u){for(o=[],l=Rn,a=oo(),a!==u?(c=bs(),c!==u?(zn=l,l=En(0,c)):(Rn=l,l=u)):(Rn=l,l=u);l!==u;)o.push(l),l=Rn,a=oo(),a!==u?(c=bs(),c!==u?(zn=l,l=En(0,c)):(Rn=l,l=u)):(Rn=l,l=u);zn=e,e=void ko(s,!0)}else Rn=e,e=u;else Rn=e,e=u;if(e===u&&(e=Rn,t.substr(Rn,5)===F?(r=F,Rn+=5):(r=u,0===Qn&&Wn(Pe)),r!==u?(n=co(),s=is(),s!==u?(zn=e,f=s,e=void((bo.limit||(bo.limit={})).rows={val:f})):(Rn=e,e=u)):(Rn=e,e=u),e===u&&(e=Rn,t.substr(Rn,6)===m?(r=m,Rn+=6):(r=u,0===Qn&&Wn(qe)),r!==u?(n=co(),s=fs(),s!==u?(zn=e,e=function(t){Oo(t)}(s)):(Rn=e,e=u)):(Rn=e,e=u),e===u&&(e=Rn,t.substr(Rn,8)===p?(r=p,Rn+=8):(r=u,0===Qn&&Wn(Ie)),r!==u?(n=co(),s=hs(),s!==u?(zn=e,e=void((i=s)&&(bo.search=i))):(Rn=e,e=u)):(Rn=e,e=u),e===u&&(e=Rn,t.substr(Rn,7)===B?(r=B,Rn+=7):(r=u,0===Qn&&Wn(He)),r!==u?(n=co(),s=function(){let t,e;t=Rn,e=Ws(),e!==u&&(zn=t,e=function(t){t&&(bo.count=!0)}(e));return t=e,t}(),s!==u?(r=[r,n,s],e=r):(Rn=e,e=u)):(Rn=e,e=u),e===u))))){if(e=Rn,t.substr(Rn,7)===v?(r=v,Rn+=7):(r=u,0===Qn&&Wn(Me)),r!==u)if(zn=Rn,n=cds.env.features.skip_apply_parsing,n=n?void 0:u,n!==u){for(s=co(),o=[],l=t.charAt(Rn),oe.test(l)?Rn++:(l=u,0===Qn&&Wn(Qe));l!==u;)o.push(l),l=t.charAt(Rn),oe.test(l)?Rn++:(l=u,0===Qn&&Wn(Qe));zn=e,e=null}else Rn=e,e=u;else Rn=e,e=u;e===u&&(e=Rn,t.substr(Rn,7)===v?(r=v,Rn+=7):(r=u,0===Qn&&Wn(Me)),r!==u?(n=co(),s=Ns(),s!==u?(zn=e,e=s):(Rn=e,e=u)):(Rn=e,e=u),e===u&&(e=Rn,t.substr(Rn,8)===g?(r=g,Rn+=8):(r=u,0===Qn&&Wn(Ne)),r!==u&&(zn=e,r=null),e=r))}}}}var i,f,h;return e}function os(){let e,r;var n;return e=Rn,42===t.charCodeAt(Rn)?(r=$,Rn++):(r=u,0===Qn&&Wn(Ve)),r===u&&(r=$s()),r!==u&&(zn=e,n=r,bo.columns=Array.isArray(bo.columns)?bo.columns:[],bo.columns.find(yo(n))||bo.columns.push(n),r=n),e=r,e}function ls(){let e,r,n,s,o,l;for(e=Rn,r=[],n=Rn,s=ss(),s!==u?(o=co(),59===t.charCodeAt(Rn)?(l=S,Rn++):(l=u,0===Qn&&Wn(Xe)),l===u&&(l=null),zn=n,n=s):(Rn=n,n=u);n!==u;)r.push(n),n=Rn,s=ss(),s!==u?(o=co(),59===t.charCodeAt(Rn)?(l=S,Rn++):(l=u,0===Qn&&Wn(Xe)),l===u&&(l=null),zn=n,n=bn(s)):(Rn=n,n=u);return zn=e,r=function(t){if(t.find(t=>t&&void 0!==t.apply)){const t=new Error('"$apply" is not supported for expand operation');throw t.statusCode=501,t}if(bo.columns){for(const t of bo.columns)bo.expand.find(yo(t))||bo.expand.push(t);delete bo.columns}else Array.isArray(bo.expand)&&-1===bo.expand.indexOf("*")&&bo.expand.unshift("*")}(r),e=r,e}function as(){let t,e,r,n,s;return t=Rn,e=Rn,r=lo(),r!==u&&(zn=e,Eo.push(bo),bo=bo.expand[bo.expand.length-1],r=void(bo.expand=[])),e=r,e!==u?(r=ls(),n=Rn,s=ao(),s!==u&&(zn=n,bo.expand.length||bo.expand.push("*"),s=void(bo=Eo.pop())),n=s,n!==u?(e=[e,r,n],t=e):(Rn=t,t=u)):(Rn=t,t=u),t}function cs(){let e,r,n;return e=Rn,r=Rn,42===t.charCodeAt(Rn)?(n=$,Rn++):(n=u,0===Qn&&Wn(Ve)),n===u&&(n=$s()),n!==u&&(zn=r,n=function(t){const e="*"===t?{}:t;if(e.ref?.length>1)throw Object.assign(new Error(`navigation "${e.ref.join("/")}" in "$expand" is not supported`),{statusCode:400});return e.expand=["*"],Array.isArray(bo.expand)||(bo.expand=[]),bo.expand.find(yo(e))||bo.expand.push(e),e}(n)),r=n,r!==u?(n=as(),n===u&&(n=null),r=[r,n],e=r):(Rn=e,e=u),e}function is(){let t,e;return t=Rn,e=eo(),e!==u&&(zn=t),t=e,t}function fs(){let t,e;return t=Rn,e=eo(),e!==u&&(zn=t),t=e,t}function hs(){let e,r,n,s;if(e=Rn,r=Rn,n=[],s=t.charAt(Rn),ie.test(s)?Rn++:(s=u,0===Qn&&Wn(su)),s!==u)for(;s!==u;)n.push(s),s=t.charAt(Rn),ie.test(s)?Rn++:(s=u,0===Qn&&Wn(su));else n=u;return r=n!==u?t.substring(r,Rn):n,r!==u&&(zn=e,r=[{val:r}]),e=r,e===u&&(e=co()),e}function As(){let t,e,r;return t=Rn,e=Bs(),e!==u?(r=Ms(),r!==u?(zn=t,t=function(t,e){bo.compute=Array.isArray(bo.compute)?bo.compute:[];const u=t.xpr?{xpr:t.xpr,as:e}:{...t,as:e};return bo.compute.push(u),u}(e,r)):(Rn=t,t=u)):(Rn=t,t=u),t}function ps(){let t,e;return t=Rn,e=ds(),e!==u&&(zn=t),t=e,t}function ds(){let e,r,n,s,o,l,a;var c,i;if(e=Rn,r=Rn,n=Is(),n===u&&(n=null),zn=r,n=(c=n)?[c]:[],r=n,n=Rn,s=lo(),s!==u?(o=ds(),o!==u?(l=ao(),l!==u?(zn=n,i=o,n=void r.push({xpr:i})):(Rn=n,n=u)):(Rn=n,n=u)):(Rn=n,n=u),n===u&&(n=Rn,s=ys(),s!==u&&(zn=n,s=function(t,e){t.push(...e)}(r,s)),n=s,n===u&&(n=Rn,s=Cs(),s!==u&&(zn=n,s=function(t,e){"not"===t[t.length-1]&&"not"===e[0]?t.push({xpr:e}):t.push(...e)}(r,s)),n=s,n===u&&(n=Rn,s=function(){let e,r,n,s,o,l,a;e=Rn,r=t.substr(Rn,8),r.toLowerCase()===at?Rn+=8:(r=u,0===Qn&&Wn(Gu));r===u&&(r=t.substr(Rn,8),r.toLowerCase()===ct?Rn+=8:(r=u,0===Qn&&Wn(Ju)),r===u&&(r=t.substr(Rn,10),r.toLowerCase()===it?Rn+=10:(r=u,0===Qn&&Wn(Ku)),r===u&&(r=t.substr(Rn,14),r.toLowerCase()===ft?Rn+=14:(r=u,0===Qn&&Wn(Vu)))));r!==u?(n=lo(),n!==u?(s=ws(),s!==u?(o=oo(),o!==u?(l=ws(),l!==u?(a=ao(),a!==u?(zn=e,c=s,i=l,e={func:r.toLowerCase(),args:[c,i]}):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u);var c,i;return e}(),s!==u&&(zn=n,s=function(t,e){t.push(e)}(r,s)),n=s,n===u&&(n=Rn,s=Ws(),s!==u&&(zn=n,s=function(t,e){t.push({val:e})}(r,s)),n=s,n===u&&(n=Rn,s=xs(),s!==u&&(zn=n,s=function(t,e){t.push(...e)}(r,s)),n=s))))),n!==u){for(s=[],o=Rn,l=Zs(),l===u&&(l=_s()),l!==u?(a=ds(),a!==u?(zn=o,o=Fn(r,l,a)):(Rn=o,o=u)):(Rn=o,o=u);o!==u;)s.push(o),o=Rn,l=Zs(),l===u&&(l=_s()),l!==u?(a=ds(),a!==u?(zn=o,o=Fn(r,l,a)):(Rn=o,o=u)):(Rn=o,o=u);zn=e,e=r}else Rn=e,e=u;return e}function Cs(){let e,r,n,s,l,a,c;if(e=Rn,r=Rn,n=uo(),n!==u&&(zn=r,n=[n]),r=n,r!==u)if(47===t.charCodeAt(Rn)?(n=o,Rn++):(n=u,0===Qn&&Wn(we)),n!==u){for(s=[],l=Rn,a=uo(),a!==u?(47===t.charCodeAt(Rn)?(c=o,Rn++):(c=u,0===Qn&&Wn(we)),c!==u?(zn=l,l=mn(r,a)):(Rn=l,l=u)):(Rn=l,l=u);l!==u;)s.push(l),l=Rn,a=uo(),a!==u?(47===t.charCodeAt(Rn)?(c=o,Rn++):(c=u,0===Qn&&Wn(we)),c!==u?(zn=l,l=mn(r,a)):(Rn=l,l=u)):(Rn=l,l=u);l=Rn,a=function(){let e,r,n,s,o;e=Rn,t.substr(Rn,3)===I?(r=I,Rn+=3):(r=u,0===Qn&&Wn(lu));r!==u?(n=lo(),n!==u?(s=Es(),s===u&&(s=null),o=ao(),o!==u?(zn=e,e=s):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u);return e}(),a!==u&&(zn=l,a=function(t,e){let u=t.pop();if(!e)return["exists",{ref:[...t,{id:u}]}];let r=[];for(let t=0,n=0;t<e.length;++t){let s=e[t];s.ref&&0===s.ref.length&&"="===e[t+1]?r[n++]={func:"contains",args:[{ref:[u]},e[t+=2]]}:r[n++]=s}return r.length<e.length?t.length?(u=t.pop(),["exists",{ref:[...t,{id:u,where:r}]}]):r:["exists",{ref:[...t,{id:u,where:e}]}]}(r,a)),l=a,l===u&&(l=Rn,a=function(){let e,r,n,s,o;e=Rn,t.substr(Rn,3)===Z?(r=Z,Rn+=3):(r=u,0===Qn&&Wn(au));r!==u?(n=lo(),n!==u?(s=Es(),s!==u?(o=ao(),o!==u?(zn=e,e=s):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u);return e}(),a!==u&&(zn=l,a=function(t,e){let u=t.pop();return["not","exists",{ref:[...t,{id:u,where:["not",{xpr:[...e]}]}]}]}(r,a)),l=a),l!==u?(zn=e,e=l):(Rn=e,e=u)}else Rn=e,e=u;else Rn=e,e=u;return e}function gs(){let t,e,r,n,s,o,l;var a,c;if(t=Rn,e=Rn,r=Is(),r===u&&(r=null),zn=e,r=(a=r)?[a]:[],e=r,r=Rn,n=lo(),n!==u?(s=gs(),s!==u?(o=ao(),o!==u?(zn=r,c=s,r=void e.push({xpr:c})):(Rn=r,r=u)):(Rn=r,r=u)):(Rn=r,r=u),r===u&&(r=Rn,n=ys(),n!==u&&(zn=r,n=function(t,e){t.push(...e)}(e,n)),r=n,r===u&&(r=Rn,n=ks(),n!==u&&(zn=r,n=function(t,e){t.push(e)}(e,n)),r=n,r===u&&(r=Rn,n=Cs(),n!==u&&(zn=r,n=function(t,e){t.push(...e)}(e,n)),r=n,r===u&&(r=Rn,n=xs(),n!==u&&(zn=r,n=function(t,e){t.push(...e)}(e,n)),r=n)))),r!==u){for(n=[],s=Rn,o=Zs(),o===u&&(o=_s()),o!==u?(l=gs(),l!==u?(zn=s,s=Bn(e,o,l)):(Rn=s,s=u)):(Rn=s,s=u);s!==u;)n.push(s),s=Rn,o=Zs(),o===u&&(o=_s()),o!==u?(l=gs(),l!==u?(zn=s,s=Bn(e,o,l)):(Rn=s,s=u)):(Rn=s,s=u);zn=t,t=e}else Rn=t,t=u;return t}function Es(){let e,r,n,s;return e=Rn,r=uo(),r!==u?(58===t.charCodeAt(Rn)?(n=k,Rn++):(n=u,0===Qn&&Wn(ou)),n!==u?(s=gs(),s!==u?(zn=e,e=Io(r,s)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u),e}function bs(){let e,r,n,s,o,l;var a;return e=Rn,r=Rn,n=Cs(),n!==u&&(zn=r,n=function(){const t=new Error('"$orderby" does not support lambda');throw t.statusCode=501,t}()),r=n,r===u&&(r=ks(),r===u&&(r=$s())),r!==u?(n=Rn,s=io(),s!==u?(o=Rn,t.substr(Rn,3)===_?(l=_,Rn+=3):(l=u,0===Qn&&Wn(cu)),l===u&&(t.substr(Rn,4)===N?(l=N,Rn+=4):(l=u,0===Qn&&Wn(iu))),o=l!==u?t.substring(o,Rn):l,o!==u?(zn=n,n=o):(Rn=n,n=u)):(Rn=n,n=u),n===u&&(n=null),zn=e,e=po(r,(a=n)&&{sort:a})):(Rn=e,e=u),e}function Fs(){let e,r,n;return Qn++,e=Rn,r=Ys(),r!==u&&(zn=e,r={val:r}),e=r,e===u&&(e=Rn,r=Rn,Qn++,39===t.charCodeAt(Rn)?(n=z,Rn++):(n=u,0===Qn&&Wn(Au)),Qn--,n===u?r=void 0:(Rn=r,r=u),r!==u?(n=Ls(),n!==u?(zn=e,e=n):(Rn=e,e=u)):(Rn=e,e=u)),Qn--,e===u&&(r=u,0===Qn&&Wn(hu)),e}function ms(){let e,r,n;return Qn++,e=Rn,64===t.charCodeAt(Rn)?(r=M,Rn++):(r=u,0===Qn&&Wn(bu)),r!==u?(n=uo(),n!==u?(zn=e,e="@"+n):(Rn=e,e=u)):(Rn=e,e=u),Qn--,e===u&&(r=u,0===Qn&&Wn(Eu)),e}function Bs(){let e,r,n,s,o,l,a,c;if(e=Rn,r=vs(),r!==u){for(n=[],s=Rn,o=co(),t.substr(Rn,3)===U?(l=U,Rn+=3):(l=u,0===Qn&&Wn(mu)),l===u&&(t.substr(Rn,3)===G?(l=G,Rn+=3):(l=u,0===Qn&&Wn(Bu)),l===u&&(t.substr(Rn,3)===J?(l=J,Rn+=3):(l=u,0===Qn&&Wn(vu)),l===u&&(t.substr(Rn,5)===K?(l=K,Rn+=5):(l=u,0===Qn&&Wn(yu)),l===u&&(t.substr(Rn,3)===V?(l=V,Rn+=3):(l=u,0===Qn&&Wn(Du)))))),l!==u?(a=co(),c=vs(),c!==u?(zn=s,s=yn(0,l,c)):(Rn=s,s=u)):(Rn=s,s=u);s!==u;)n.push(s),s=Rn,o=co(),t.substr(Rn,3)===U?(l=U,Rn+=3):(l=u,0===Qn&&Wn(mu)),l===u&&(t.substr(Rn,3)===G?(l=G,Rn+=3):(l=u,0===Qn&&Wn(Bu)),l===u&&(t.substr(Rn,3)===J?(l=J,Rn+=3):(l=u,0===Qn&&Wn(vu)),l===u&&(t.substr(Rn,5)===K?(l=K,Rn+=5):(l=u,0===Qn&&Wn(yu)),l===u&&(t.substr(Rn,3)===V?(l=V,Rn+=3):(l=u,0===Qn&&Wn(Du)))))),l!==u?(a=co(),c=vs(),c!==u?(zn=s,s=yn(0,l,c)):(Rn=s,s=u)):(Rn=s,s=u);zn=e,e=function(t,e){const u={sub:"-",add:"+",mul:"*",divby:"/",div:"/"},r=t=>"number"==typeof t?{val:t}:"string"==typeof t?{ref:[t]}:t;let n=[r(t)];for(let t=0;t<e.length;t++)n.push(u[e[t].op]),n.push(r(e[t].operand));return 0===e.length?n[0]:{xpr:n}}(r,n)}else Rn=e,e=u;return e}function vs(){let e;return e=eo(),e===u&&(e=function(){let e,r,n;e=Rn,45===t.charCodeAt(Rn)?(r=W,Rn++):(r=u,0===Qn&&Wn(xu));r!==u?(n=uo(),n!==u?(zn=e,e={xpr:["-",{ref:[n]}]}):(Rn=e,e=u)):(Rn=e,e=u);return e}(),e===u&&(e=uo(),e===u&&(e=function(){let t,e,r,n;t=Rn,e=lo(),e!==u?(r=Bs(),r!==u?(n=ao(),n!==u?(zn=t,t=r):(Rn=t,t=u)):(Rn=t,t=u)):(Rn=t,t=u);return t}()))),e}function ys(){let e,r,n,s,o,l;var a,c;return e=Rn,r=ws(),r!==u?(n=io(),n!==u?(s=Rn,t.substr(Rn,2)===X?(o=X,Rn+=2):(o=u,0===Qn&&Wn(wu)),o===u&&(t.substr(Rn,2)===Y?(o=Y,Rn+=2):(o=u,0===Qn&&Wn($u)),o===u&&(t.substr(Rn,2)===tt?(o=tt,Rn+=2):(o=u,0===Qn&&Wn(Lu)),o===u&&(t.substr(Rn,2)===et?(o=et,Rn+=2):(o=u,0===Qn&&Wn(Su)),o===u&&(t.substr(Rn,2)===ut?(o=ut,Rn+=2):(o=u,0===Qn&&Wn(Tu)),o===u&&(t.substr(Rn,2)===rt?(o=rt,Rn+=2):(o=u,0===Qn&&Wn(ju))))))),s=o!==u?t.substring(s,Rn):o,s!==u?(o=io(),o!==u?(l=ws(),l!==u?(zn=e,c=l,e=[r,ho[a=s]||a,c]):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u),e}function Ds(){let e,r;return e=Rn,r=ms(),r!==u&&(zn=e,r={list:r}),e=r,e===u&&(e=function(){let e,r,n,s;Qn++,e=Rn,r=lo(),r!==u?(n=function(){let e,r,n,s,o,l;if(e=Rn,r=Ls(),r!==u){for(n=[],s=Rn,44===t.charCodeAt(Rn)?(o=P,Rn++):(o=u,0===Qn&&Wn(pu)),o!==u?(l=Ls(),l!==u?(zn=s,s=$n(0,l)):(Rn=s,s=u)):(Rn=s,s=u);s!==u;)n.push(s),s=Rn,44===t.charCodeAt(Rn)?(o=P,Rn++):(o=u,0===Qn&&Wn(pu)),o!==u?(l=Ls(),l!==u?(zn=s,s=$n(0,l)):(Rn=s,s=u)):(Rn=s,s=u);zn=e,a=n,e=[r,...a]}else Rn=e,e=u;var a;return e}(),n!==u?(s=ao(),s!==u?(zn=e,e={list:n}):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u);Qn--,e===u&&(r=u,0===Qn&&Wn(Mu));return e}()),e}function xs(){let e,r,n,s,o,l;return e=Rn,r=ws(),r!==u?(n=io(),n!==u?(t.substr(Rn,2)===nt?(s=nt,Rn+=2):(s=u,0===Qn&&Wn(Ou)),s!==u?(o=io(),o!==u?(l=Ds(),l!==u?(zn=e,e=[r,"in",l]):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u),e}function ws(){let e;return e=function(){let e,r,n,s,l,a,i,f;Qn++,e=Rn,r=[],n=Rn,s=uo(),s!==u?(l=Rn,a=lo(),a!==u?(i=es(),i!==u?(f=ao(),f!==u?(zn=l,l=Dn(0,i)):(Rn=l,l=u)):(Rn=l,l=u)):(Rn=l,l=u),l===u&&(l=null),47===t.charCodeAt(Rn)?(a=o,Rn++):(a=u,0===Qn&&Wn(we)),a!==u?(zn=n,n=xn(s,l)):(Rn=n,n=u)):(Rn=n,n=u);if(n!==u)for(;n!==u;)r.push(n),n=Rn,s=uo(),s!==u?(l=Rn,a=lo(),a!==u?(i=es(),i!==u?(f=ao(),f!==u?(zn=l,l=Dn(0,i)):(Rn=l,l=u)):(Rn=l,l=u)):(Rn=l,l=u),l===u&&(l=null),47===t.charCodeAt(Rn)?(a=o,Rn++):(a=u,0===Qn&&Wn(we)),a!==u?(zn=n,n=xn(s,l)):(Rn=n,n=u)):(Rn=n,n=u);else r=u;r!==u?(t.substr(Rn,6)===c?(n=c,Rn+=6):(n=u,0===Qn&&Wn(Se)),n!==u?(zn=e,e={func:"count",as:"$count",args:[{ref:r}]}):(Rn=e,e=u)):(Rn=e,e=u);Qn--,e===u&&(r=u,0===Qn&&Wn(ku));return e}(),e===u&&(e=ks(),e===u&&(e=Ls(),e===u&&(e=$s(),e===u&&(e=js(),e===u&&(e=Os(),e===u&&(e=function(){let e,r,n,s,o;Qn++,e=Rn,91===t.charCodeAt(Rn)?(r=q,Rn++):(r=u,0===Qn&&Wn(du));if(r!==u){for(n=Rn,s=[],o=t.charAt(Rn),Ae.test(o)?Rn++:(o=u,0===Qn&&Wn(Hu));o!==u;)s.push(o),o=t.charAt(Rn),Ae.test(o)?Rn++:(o=u,0===Qn&&Wn(Hu));n=t.substring(n,Rn),93===t.charCodeAt(Rn)?(s=H,Rn++):(s=u,0===Qn&&Wn(Cu)),s!==u?(zn=e,e={list:n.replace(/"/g,"").split(",").map(t=>({val:t}))}):(Rn=e,e=u)}else Rn=e,e=u;Qn--,e===u&&(r=u,0===Qn&&Wn(Mu));return e}())))))),e}function $s(){let e,r,n,s,l,a;if(Qn++,e=Rn,r=uo(),r!==u){for(n=[],s=Rn,47===t.charCodeAt(Rn)?(l=o,Rn++):(l=u,0===Qn&&Wn(we)),l!==u?(a=uo(),a!==u?(zn=s,s=wn(0,a)):(Rn=s,s=u)):(Rn=s,s=u);s!==u;)n.push(s),s=Rn,47===t.charCodeAt(Rn)?(l=o,Rn++):(l=u,0===Qn&&Wn(we)),l!==u?(a=uo(),a!==u?(zn=s,s=wn(0,a)):(Rn=s,s=u)):(Rn=s,s=u);zn=e,i=n,e="null"===(c=r)?{val:null}:{ref:[c,...i]}}else Rn=e,e=u;var c,i;return Qn--,e===u&&(r=u,0===Qn&&Wn(Iu)),e}function Ls(){let e,r;return e=Rn,r=Ws(),r!==u&&(zn=e,r={val:r}),e=r,e===u&&(e=Rn,r=to(),r!==u&&(zn=e,r=function(t){return{val:t}}(r)),e=r,e===u&&(e=Rn,r=function(){let e,r,n,s,o,l,a,c,i,f;Qn++,e=Rn,r=Rn,n=t.charAt(Rn),Ee.test(n)?Rn++:(n=u,0===Qn&&Wn(Ur));n!==u?(s=t.charAt(Rn),Ee.test(s)?Rn++:(s=u,0===Qn&&Wn(Ur)),s!==u?(58===t.charCodeAt(Rn)?(o=k,Rn++):(o=u,0===Qn&&Wn(ou)),o!==u?(l=t.charAt(Rn),Ee.test(l)?Rn++:(l=u,0===Qn&&Wn(Ur)),l!==u?(a=t.charAt(Rn),Ee.test(a)?Rn++:(a=u,0===Qn&&Wn(Ur)),a!==u?(58===t.charCodeAt(Rn)?(c=k,Rn++):(c=u,0===Qn&&Wn(ou)),c!==u?(i=t.charAt(Rn),Ee.test(i)?Rn++:(i=u,0===Qn&&Wn(Ur)),i!==u?(f=t.charAt(Rn),Ee.test(f)?Rn++:(f=u,0===Qn&&Wn(Ur)),f!==u?(n=[n,s,o,l,a,c,i,f],r=n):(Rn=r,r=u)):(Rn=r,r=u)):(Rn=r,r=u)):(Rn=r,r=u)):(Rn=r,r=u)):(Rn=r,r=u)):(Rn=r,r=u)):(Rn=r,r=u);e=r!==u?t.substring(e,Rn):r;Qn--,e===u&&(r=u,0===Qn&&Wn(Qr));return e}(),r!==u&&(zn=e,r=function(t){return{val:t}}(r)),e=r,e===u&&(e=Rn,r=ro(),r!==u&&(zn=e,r=function(t){return{val:t}}(r)),e=r,e===u&&(e=Rn,r=function(){let e,r,n,s,o,l,a,c,i,f,h;Qn++,e=Rn,r=Rn,Qn++,n=function(){let e,r,n;e=Rn,r=[],n=t.charAt(Rn),Ee.test(n)?Rn++:(n=u,0===Qn&&Wn(Ur));if(n!==u)for(;n!==u;)r.push(n),n=t.charAt(Rn),Ee.test(n)?Rn++:(n=u,0===Qn&&Wn(Ur));else r=u;r!==u?(45===t.charCodeAt(Rn)?(n=W,Rn++):(n=u,0===Qn&&Wn(xu)),n!==u?(r=[r,n],e=r):(Rn=e,e=u)):(Rn=e,e=u);return e}(),Qn--,n===u?r=void 0:(Rn=r,r=u);if(r!==u){if(n=Rn,s=Rn,o=t.charAt(Rn),be.test(o)?Rn++:(o=u,0===Qn&&Wn(Wr)),o===u&&(o=null),l=[],a=t.charAt(Rn),Ee.test(a)?Rn++:(a=u,0===Qn&&Wn(Ur)),a!==u)for(;a!==u;)l.push(a),a=t.charAt(Rn),Ee.test(a)?Rn++:(a=u,0===Qn&&Wn(Ur));else l=u;if(l!==u){if(a=Rn,46===t.charCodeAt(Rn)?(c=te,Rn++):(c=u,0===Qn&&Wn(Kr)),c!==u){if(i=[],f=t.charAt(Rn),Ee.test(f)?Rn++:(f=u,0===Qn&&Wn(Ur)),f!==u)for(;f!==u;)i.push(f),f=t.charAt(Rn),Ee.test(f)?Rn++:(f=u,0===Qn&&Wn(Ur));else i=u;i!==u?(c=[c,i],a=c):(Rn=a,a=u)}else Rn=a,a=u;if(a===u&&(a=null),c=Rn,101===t.charCodeAt(Rn)?(i=ue,Rn++):(i=u,0===Qn&&Wn(Yr)),i!==u){if(f=[],h=t.charAt(Rn),Ee.test(h)?Rn++:(h=u,0===Qn&&Wn(Ur)),h!==u)for(;h!==u;)f.push(h),h=t.charAt(Rn),Ee.test(h)?Rn++:(h=u,0===Qn&&Wn(Ur));else f=u;f!==u?(i=[i,f],c=i):(Rn=c,c=u)}else Rn=c,c=u;c===u&&(c=null),o=[o,l,a,c],s=o}else Rn=s,s=u;n=s!==u?t.substring(n,Rn):s,n!==u?(zn=e,e=mo(n)):(Rn=e,e=u)}else Rn=e,e=u;Qn--,e===u&&(r=u,0===Qn&&Wn(Xr));return e}(),r!==u&&(zn=e,r=function(t){return"number"==typeof t?{val:t}:{val:t,literal:"number"}}(r)),e=r,e===u&&(e=Rn,r=Xs(),r!==u&&(zn=e,r=function(t){return{val:t}}(r)),e=r,e===u&&(e=Rn,r=function(){let e,r,n,s,o,l;Qn++,e=Rn,t.substr(Rn,7)===re?(r=re,Rn+=7):(r=u,0===Qn&&Wn(fn));if(r!==u){if(n=Rn,s=Rn,o=[],l=t.charAt(Rn),De.test(l)?Rn++:(l=u,0===Qn&&Wn(hn)),l!==u)for(;l!==u;)o.push(l),l=t.charAt(Rn),De.test(l)?Rn++:(l=u,0===Qn&&Wn(hn));else o=u;o!==u?(t.substr(Rn,2)===ne?(l=ne,Rn+=2):(l=u,0===Qn&&Wn(An)),l===u&&(61===t.charCodeAt(Rn)?(l=h,Rn++):(l=u,0===Qn&&Wn(Oe))),l===u&&(l=null),o=[o,l],s=o):(Rn=s,s=u),n=s!==u?t.substring(n,Rn):s,n!==u?(39===t.charCodeAt(Rn)?(s=z,Rn++):(s=u,0===Qn&&Wn(Au)),s!==u?(zn=e,a=n,e=cds.env.features.base64_binaries?vo(a):Buffer.from(a,"base64")):(Rn=e,e=u)):(Rn=e,e=u)}else Rn=e,e=u;var a;Qn--,e===u&&(r=u,0===Qn&&Wn(cn));return e}(),r!==u&&(zn=e,r=function(t){return{val:t}}(r)),e=r,e===u&&(e=Rn,r=ms(),r!==u&&(zn=e,r=function(t){return{val:t}}(r)),e=r,e===u&&(e=Ts())))))))),e}function Ss(){let e,r;return e=Rn,r=Ls(),r!==u&&(zn=e),e=r,e===u&&(e=Rn,r=function(){let e,r,n;Qn++,e=Rn,r=[],n=t.charAt(Rn),ge.test(n)?Rn++:(n=u,0===Qn&&Wn(Mr));if(n!==u)for(;n!==u;)r.push(n),n=t.charAt(Rn),ge.test(n)?Rn++:(n=u,0===Qn&&Wn(Mr));else r=u;e=r!==u?t.substring(e,Rn):r;Qn--,e===u&&(r=u,0===Qn&&Wn(Hr));return e}(),r!==u&&(zn=e,r=function(t){throw Object.assign(new Error(`Invalid value: ${t}`),{statusCode:400})}(r)),e=r),e}function Ts(){let e,r;return Qn++,e=Rn,t.substr(Rn,4)===st?(r=st,Rn+=4):(r=u,0===Qn&&Wn(_u)),r!==u&&(zn=e,r={val:null}),e=r,Qn--,e===u&&(r=u,0===Qn&&Wn(Zu)),e}function js(){let e,r,n,s,o,l;if(Qn++,e=Rn,r=Rn,n=Rn,123===t.charCodeAt(Rn)?(s=ot,Rn++):(s=u,0===Qn&&Wn(Ru)),s!==u){for(o=[],l=js(),l===u&&(l=t.charAt(Rn),he.test(l)?Rn++:(l=u,0===Qn&&Wn(zu)));l!==u;)o.push(l),l=js(),l===u&&(l=t.charAt(Rn),he.test(l)?Rn++:(l=u,0===Qn&&Wn(zu)));125===t.charCodeAt(Rn)?(l=lt,Rn++):(l=u,0===Qn&&Wn(Pu)),l!==u?(s=[s,o,l],n=s):(Rn=n,n=u)}else Rn=n,n=u;return r=n!==u?t.substring(r,Rn):n,r!==u&&(zn=e,r={val:r}),e=r,Qn--,e===u&&(r=u,0===Qn&&Wn(Nu)),e}function Os(){let e,r,n,s,o,l,a,c;if(Qn++,e=Rn,r=Rn,n=Rn,91===t.charCodeAt(Rn)?(s=q,Rn++):(s=u,0===Qn&&Wn(du)),s!==u?(o=co(),93===t.charCodeAt(Rn)?(l=H,Rn++):(l=u,0===Qn&&Wn(Cu)),l!==u?(s=[s,o,l],n=s):(Rn=n,n=u)):(Rn=n,n=u),n===u)if(n=Rn,91===t.charCodeAt(Rn)?(s=q,Rn++):(s=u,0===Qn&&Wn(du)),s!==u)if(o=co(),123===t.charCodeAt(Rn)?(l=ot,Rn++):(l=u,0===Qn&&Wn(Ru)),l!==u){for(a=[],c=Os(),c===u&&(c=t.charAt(Rn),Ae.test(c)?Rn++:(c=u,0===Qn&&Wn(Hu)));c!==u;)a.push(c),c=Os(),c===u&&(c=t.charAt(Rn),Ae.test(c)?Rn++:(c=u,0===Qn&&Wn(Hu)));93===t.charCodeAt(Rn)?(c=H,Rn++):(c=u,0===Qn&&Wn(Cu)),c!==u?(s=[s,o,l,a,c],n=s):(Rn=n,n=u)}else Rn=n,n=u;else Rn=n,n=u;return r=n!==u?t.substring(r,Rn):n,r!==u&&(zn=e,r={val:r}),e=r,Qn--,e===u&&(r=u,0===Qn&&Wn(qu)),e}function ks(){let e,r,n,s,o;return e=Rn,r=function(){let e,r,n;if(Qn++,e=Rn,r=[],n=t.charAt(Rn),pe.test(n)?Rn++:(n=u,0===Qn&&Wn(Uu)),n!==u)for(;n!==u;)r.push(n),n=t.charAt(Rn),pe.test(n)?Rn++:(n=u,0===Qn&&Wn(Uu));else r=u;return e=r!==u?t.substring(e,Rn):r,Qn--,e===u&&(r=u,0===Qn&&Wn(Qu)),e}(),r!==u?(n=lo(),n!==u?(s=function(){let t,e,r,n,s,o,l,a;if(t=Rn,e=[],r=Rn,n=ws(),n!==u){for(s=[],o=Rn,l=oo(),l!==u?(a=ws(),a!==u?(zn=o,o=Ln(0,a)):(Rn=o,o=u)):(Rn=o,o=u);o!==u;)s.push(o),o=Rn,l=oo(),l!==u?(a=ws(),a!==u?(zn=o,o=Ln(0,a)):(Rn=o,o=u)):(Rn=o,o=u);zn=r,r=Sn(n,s)}else Rn=r,r=u;for(;r!==u;)if(e.push(r),r=Rn,n=ws(),n!==u){for(s=[],o=Rn,l=oo(),l!==u?(a=ws(),a!==u?(zn=o,o=Ln(0,a)):(Rn=o,o=u)):(Rn=o,o=u);o!==u;)s.push(o),o=Rn,l=oo(),l!==u?(a=ws(),a!==u?(zn=o,o=Ln(0,a)):(Rn=o,o=u)):(Rn=o,o=u);zn=r,r=Sn(n,s)}else Rn=r,r=u;return zn=t,e=function(t){return t.length?t[0]:t}(e),t=e,t}(),o=ao(),o!==u?(zn=e,e=function(t,e){if(Co&&!(t.toLowerCase()in Co.functions))throw Object.assign(new Error(`Function "${t}" is not supported`),{statusCode:501});return{func:t.toLowerCase(),args:e}}(r,s)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u),e}function Is(){let e,r,n,s;return e=Rn,r=co(),n=t.substr(Rn,3),n.toLowerCase()===ht?Rn+=3:(n=u,0===Qn&&Wn(Wu)),n!==u?(s=io(),s!==u?(zn=e,e="not"):(Rn=e,e=u)):(Rn=e,e=u),e}function Zs(){let e,r,n,s;return e=Rn,r=io(),r!==u?(n=t.substr(Rn,3),n.toLowerCase()===At?Rn+=3:(n=u,0===Qn&&Wn(Xu)),n!==u?(s=io(),s!==u?(zn=e,e="and"):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u),e}function _s(){let e,r,n,s;return e=Rn,r=io(),r!==u?(n=t.substr(Rn,2),n.toLowerCase()===pt?Rn+=2:(n=u,0===Qn&&Wn(Yu)),n!==u?(s=io(),s!==u?(zn=e,e="or"):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u),e}function Ns(){let e,r,n,s,l,a;if(e=Rn,r=Rs(),r!==u){for(n=[],s=Rn,47===t.charCodeAt(Rn)?(l=o,Rn++):(l=u,0===Qn&&Wn(we)),l!==u?(a=Rs(),a!==u?(zn=s,s=Tn(0,a)):(Rn=s,s=u)):(Rn=s,s=u);s!==u;)n.push(s),s=Rn,47===t.charCodeAt(Rn)?(l=o,Rn++):(l=u,0===Qn&&Wn(we)),l!==u?(a=Rs(),a!==u?(zn=s,s=Tn(0,a)):(Rn=s,s=u)):(Rn=s,s=u);zn=e,e=function(t,e){if(void 0!==t){e=Array.isArray(e)?e:[e];for(let u of e)for(const e in u)"where"!==e||!t.groupBy&&!t.aggregate||t.having?"limit"===e&&t.limit?.offset&&u.limit.rows?t.limit.rows=u.limit.rows:"limit"===e&&t.limit?.offset?.val&&u.limit.offset?.val?t.limit.offset.val+=u.limit.offset.val:t[e]||"aggregate"===e&&t.groupBy&&!u.groupBy?(t={apply:t})[e]=u[e]:t[e]=u[e]:t.having=u[e];return{apply:t}}}(r,n)}else Rn=e,e=u;return e}function Rs(){let e,r,n;return e=Rn,t.substr(Rn,9)===dt?(r=dt,Rn+=9):(r=u,0===Qn&&Wn(tr)),r!==u?(n=function(){let t,e,r,n,s,o,l,a,c,i;if(t=Rn,e=lo(),e!==u)if(r=co(),n=zs(),n!==u){for(s=[],o=Rn,l=co(),a=oo(),a!==u?(c=co(),i=zs(),i!==u?(zn=o,o=jn(0,i)):(Rn=o,o=u)):(Rn=o,o=u);o!==u;)s.push(o),o=Rn,l=co(),a=oo(),a!==u?(c=co(),i=zs(),i!==u?(zn=o,o=jn(0,i)):(Rn=o,o=u)):(Rn=o,o=u);o=co(),l=ao(),l!==u?(zn=t,f=s,t={aggregate:[n,...f]}):(Rn=t,t=u)}else Rn=t,t=u;else Rn=t,t=u;var f;return t}(),n!==u?(zn=e,e=n):(Rn=e,e=u)):(Rn=e,e=u),e===u&&(e=Rn,t.substr(Rn,7)===Ct?(r=Ct,Rn+=7):(r=u,0===Qn&&Wn(er)),r!==u?(n=function(){let t,e,r,n,s,o,l,a,c;if(t=Rn,e=lo(),e!==u)if(r=lo(),r!==u)if(n=Qs(),n!==u){for(s=[],o=Rn,l=oo(),l!==u?(a=Qs(),a!==u?(zn=o,o=On(0,a)):(Rn=o,o=u)):(Rn=o,o=u);o!==u;)s.push(o),o=Rn,l=oo(),l!==u?(a=Qs(),a!==u?(zn=o,o=On(0,a)):(Rn=o,o=u)):(Rn=o,o=u);o=Rn,l=ao(),l!==u&&(zn=o,i=s,l={groupBy:[n,...i]}),o=l,o!==u?(l=Rn,a=oo(),a!==u?(c=Ns(),c!==u?(zn=l,l=c):(Rn=l,l=u)):(Rn=l,l=u),l===u&&(l=null),a=ao(),a!==u?(zn=t,t=function(t,e,u){let r={};return r=u?{groupBy:[t,...e],...u.apply}:{groupBy:[t,...e]},r}(n,s,l)):(Rn=t,t=u)):(Rn=t,t=u)}else Rn=t,t=u;else Rn=t,t=u;else Rn=t,t=u;var i;return t}(),n!==u?(zn=e,e=n):(Rn=e,e=u)):(Rn=e,e=u),e===u&&(e=Rn,t.substr(Rn,6)===gt?(r=gt,Rn+=6):(r=u,0===Qn&&Wn(ur)),r!==u?(n=function(){let t,e,r,n,s,o;t=Rn,e=lo(),e!==u?(r=co(),n=Rn,s=ps(),s!==u&&(zn=n),n=s,n!==u?(s=co(),o=ao(),o!==u?(zn=t,t={where:n}):(Rn=t,t=u)):(Rn=t,t=u)):(Rn=t,t=u);return t}(),n!==u?(zn=e,e=n):(Rn=e,e=u)):(Rn=e,e=u),e===u&&(e=Rn,t.substr(Rn,6)===Et?(r=Et,Rn+=6):(r=u,0===Qn&&Wn(rr)),r!==u?(n=function(){let e,r,n,s,o;if(e=Rn,r=lo(),r!==u){for(n=Rn,s=[],o=t.charAt(Rn),de.test(o)?Rn++:(o=u,0===Qn&&Wn(Br));o!==u;)s.push(o),o=t.charAt(Rn),de.test(o)?Rn++:(o=u,0===Qn&&Wn(Br));n=t.substring(n,Rn),s=ao(),s!==u?(zn=e,e=function(t){if(t=t.trim())return{search:[{val:t}]}}(n)):(Rn=e,e=u)}else Rn=e,e=u;return e}(),n!==u?(zn=e,e=n):(Rn=e,e=u)):(Rn=e,e=u),e===u&&(e=Rn,t.substr(Rn,6)===bt?(r=bt,Rn+=6):(r=u,0===Qn&&Wn(nr)),r!==u?(n=function(){let t,e,r,n,s,o,l,a,c,i;if(t=Rn,e=lo(),e!==u)if(r=co(),n=Ns(),n!==u){if(s=[],o=Rn,l=co(),a=oo(),a!==u?(c=co(),i=Ns(),i!==u?(zn=o,o=kn(0,i)):(Rn=o,o=u)):(Rn=o,o=u),o!==u)for(;o!==u;)s.push(o),o=Rn,l=co(),a=oo(),a!==u?(c=co(),i=Ns(),i!==u?(zn=o,o=kn(0,i)):(Rn=o,o=u)):(Rn=o,o=u);else s=u;s!==u?(o=co(),l=ao(),l!==u?(zn=t,f=s,t={concat:[n,...f]}):(Rn=t,t=u)):(Rn=t,t=u)}else Rn=t,t=u;else Rn=t,t=u;var f;return t}(),n!==u?(zn=e,e=n):(Rn=e,e=u)):(Rn=e,e=u),e===u&&(e=Rn,t.substr(Rn,3)===Ft?(r=Ft,Rn+=3):(r=u,0===Qn&&Wn(sr)),r!==u?(n=function(){let t,e,r,n,s,o;t=Rn,e=lo(),e!==u?(r=co(),n=is(),n!==u?(s=co(),o=ao(),o!==u?(zn=t,t={limit:{rows:{val:n}}}):(Rn=t,t=u)):(Rn=t,t=u)):(Rn=t,t=u);return t}(),n!==u?(zn=e,e=n):(Rn=e,e=u)):(Rn=e,e=u),e===u&&(e=Rn,t.substr(Rn,4)===mt?(r=mt,Rn+=4):(r=u,0===Qn&&Wn(or)),r!==u?(n=function(){let t,e,r,n,s,o;t=Rn,e=lo(),e!==u?(r=co(),n=fs(),n!==u?(s=co(),o=ao(),o!==u?(zn=t,t={limit:{offset:{val:n}}}):(Rn=t,t=u)):(Rn=t,t=u)):(Rn=t,t=u);return t}(),n!==u?(zn=e,e=n):(Rn=e,e=u)):(Rn=e,e=u),e===u&&(e=Rn,t.substr(Rn,7)===Bt?(r=Bt,Rn+=7):(r=u,0===Qn&&Wn(lr)),r!==u?(n=function(){let t,e,r,n,s,o,l,a;if(t=Rn,e=lo(),e!==u)if(r=co(),n=bs(),n!==u){for(s=[],o=Rn,l=oo(),l!==u?(a=bs(),a!==u?(zn=o,o=In(0,a)):(Rn=o,o=u)):(Rn=o,o=u);o!==u;)s.push(o),o=Rn,l=oo(),l!==u?(a=bs(),a!==u?(zn=o,o=In(0,a)):(Rn=o,o=u)):(Rn=o,o=u);o=co(),l=ao(),l!==u?(zn=t,c=s,t={orderBy:[n,...c]}):(Rn=t,t=u)}else Rn=t,t=u;else Rn=t,t=u;var c;return t}(),n!==u?(zn=e,e=n):(Rn=e,e=u)):(Rn=e,e=u),e===u&&(e=Rn,t.substr(Rn,43)===vt?(r=vt,Rn+=43):(r=u,0===Qn&&Wn(ar)),r!==u?(n=function(){let t,e,r,n,s,o,l,a,c,i;if(t=Rn,e=lo(),e!==u)if(r=co(),n=Us(),n!==u){for(s=[],o=Rn,l=co(),a=oo(),a!==u?(c=co(),i=Us(),i!==u?(zn=o,o=Zn(0,i)):(Rn=o,o=u)):(Rn=o,o=u);o!==u;)s.push(o),o=Rn,l=co(),a=oo(),a!==u?(c=co(),i=Us(),i!==u?(zn=o,o=Zn(0,i)):(Rn=o,o=u)):(Rn=o,o=u);o=co(),l=ao(),l!==u?(zn=t,f=n,s.forEach(t=>Object.assign(f,t)),t={topLevels:f}):(Rn=t,t=u)}else Rn=t,t=u;else Rn=t,t=u;var f;return t}(),n!==u?(zn=e,e=n):(Rn=e,e=u)):(Rn=e,e=u),e===u&&(e=Rn,t.substr(Rn,9)===yt?(r=yt,Rn+=9):(r=u,0===Qn&&Wn(cr)),r!==u?(n=Ks(),n!==u?(zn=e,e={ancestors:n}):(Rn=e,e=u)):(Rn=e,e=u),e===u&&(e=Rn,t.substr(Rn,11)===Dt?(r=Dt,Rn+=11):(r=u,0===Qn&&Wn(ir)),r!==u?(n=Ks(),n!==u?(zn=e,e={descendants:n}):(Rn=e,e=u)):(Rn=e,e=u),e===u&&(e=Rn,r=t.substr(Rn,8),r.toLowerCase()===xt?Rn+=8:(r=u,0===Qn&&Wn(fr)),r===u&&(r=t.substr(Rn,11),r.toLowerCase()===wt?Rn+=11:(r=u,0===Qn&&Wn(hr)),r===u&&(r=t.substr(Rn,6),r.toLowerCase()===$t?Rn+=6:(r=u,0===Qn&&Wn(Ar)),r===u&&(r=t.substr(Rn,9),r.toLowerCase()===Lt?Rn+=9:(r=u,0===Qn&&Wn(pr)),r===u&&(r=t.substr(Rn,10),r.toLowerCase()===St?Rn+=10:(r=u,0===Qn&&Wn(dr)),r===u&&(r=t.substr(Rn,13),r.toLowerCase()===Tt?Rn+=13:(r=u,0===Qn&&Wn(Cr))))))),r!==u?(n=function(){let t,e,r,n,s,o,l,a,c,i;t=Rn,e=lo(),e!==u?(r=co(),n=ws(),n!==u?(s=co(),o=oo(),o!==u?(l=co(),a=ws(),a!==u?(c=co(),i=ao(),i!==u?(zn=t,t=[n,a]):(Rn=t,t=u)):(Rn=t,t=u)):(Rn=t,t=u)):(Rn=t,t=u)):(Rn=t,t=u);return t}(),n!==u?(zn=e,e=function(t,e){if(t=t.toLowerCase(),!Ao[t])throw Object.assign(new Error(`Transformation "${t}" in $apply is not yet supported.`),{statusCode:501});return{aggregate:[{func:t,args:e}]}}(r,n)):(Rn=e,e=u)):(Rn=e,e=u),e===u&&(e=Rn,r=function(){let e,r;e=Rn,t.substr(Rn,8)===_t?(r=_t,Rn+=8):(r=u,0===Qn&&Wn(vr));r!==u&&(zn=e,r={identity:!0});return e=r,e}(),r!==u&&(zn=e),e=r)))))))))))),e}function zs(){let e,r,n,s;return e=Rn,r=Rn,t.substr(Rn,6)===c?(n=c,Rn+=6):(n=u,0===Qn&&Wn(Se)),n!==u?(s=Ms(),s!==u?(zn=r,r={func:"count",args:[{val:1}],as:s}):(Rn=r,r=u)):(Rn=r,r=u),r===u&&(r=Ps()),r!==u&&(zn=e),e=r,e}function Ps(){let t,e,r,n,s;var o;return t=Rn,e=$s(),e!==u?(r=qs(),r===u&&(r=null),n=Hs(),n===u&&(n=null),s=Ms(),s===u&&(s=null),zn=t,t={func:r,args:[o=e],as:s??o.ref[0]}):(Rn=t,t=u),t===u&&(t=Rn,e=uo(),e!==u?(r=lo(),r!==u?(n=Ps(),n!==u?(s=ao(),s!==u?(e=[e,r,n,s],t=e):(Rn=t,t=u)):(Rn=t,t=u)):(Rn=t,t=u)):(Rn=t,t=u)),t}function qs(){let e,r,n,s,o,l,a;if(e=Rn,r=io(),r!==u)if(t.substr(Rn,4)===jt?(n=jt,Rn+=4):(n=u,0===Qn&&Wn(gr)),n!==u)if(s=io(),s!==u){if(o=Rn,l=[],a=t.charAt(Rn),pe.test(a)?Rn++:(a=u,0===Qn&&Wn(Uu)),a!==u)for(;a!==u;)l.push(a),a=t.charAt(Rn),pe.test(a)?Rn++:(a=u,0===Qn&&Wn(Uu));else l=u;o=l!==u?t.substring(o,Rn):l,o!==u?(zn=e,e=o.toLowerCase()):(Rn=e,e=u)}else Rn=e,e=u;else Rn=e,e=u;else Rn=e,e=u;return e}function Hs(){let e,r,n,s,o,l,a;return e=Rn,r=io(),r!==u?(t.substr(Rn,4)===Ot?(n=Ot,Rn+=4):(n=u,0===Qn&&Wn(Er)),n!==u?(s=io(),s!==u?(o=$s(),o!==u?(l=qs(),l!==u?(a=Hs(),a===u&&(a=null),r=[r,n,s,o,l,a],e=r):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u),e}function Ms(){let e,r,n,s,o;return e=Rn,r=io(),r!==u?(t.substr(Rn,2)===kt?(n=kt,Rn+=2):(n=u,0===Qn&&Wn(br)),n!==u?(s=io(),s!==u?(o=uo(),o!==u?(zn=e,e=o):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u),e}function Qs(){let e,r;return e=Rn,r=function(){let e,r,n,s,o,l,a,c,i,f,h;e=Rn,r=Rn,t.substr(Rn,6)===It?(n=It,Rn+=6):(n=u,0===Qn&&Wn(Fr));if(n!==u)if(s=lo(),s!==u)if(o=co(),t.substr(Rn,4)===Zt?(l=Zt,Rn+=4):(l=u,0===Qn&&Wn(mr)),l===u&&(l=$s()),l!==u){if(a=[],c=Rn,i=co(),f=oo(),f!==u?(h=$s(),h!==u?(i=[i,f,h],c=i):(Rn=c,c=u)):(Rn=c,c=u),c!==u)for(;c!==u;)a.push(c),c=Rn,i=co(),f=oo(),f!==u?(h=$s(),h!==u?(i=[i,f,h],c=i):(Rn=c,c=u)):(Rn=c,c=u);else a=u;a!==u?(c=co(),i=ao(),i!==u?(n=[n,s,o,l,a,c,i],r=n):(Rn=r,r=u)):(Rn=r,r=u)}else Rn=r,r=u;else Rn=r,r=u;else Rn=r,r=u;r!==u&&(zn=e,r=function(){const t=new Error("Rollup in groupby is not supported yet.");throw t.statusCode=501,t}());return e=r,e}(),r===u&&(r=$s()),r!==u&&(zn=e),e=r,e}function Us(){let e;return e=function(){let e,r,n,s,o,l,a,c,i;e=Rn,r=co(),t.substr(Rn,14)===Nt?(n=Nt,Rn+=14):(n=u,0===Qn&&Wn(yr));n!==u?(s=co(),61===t.charCodeAt(Rn)?(o=h,Rn++):(o=u,0===Qn&&Wn(Oe)),o!==u?(l=co(),t.substr(Rn,6)===Rt?(a=Rt,Rn+=6):(a=u,0===Qn&&Wn(Dr)),a!==u?(c=rs(),c!==u?(i=co(),zn=e,e={hierarchyNodes:c}):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u);return e}(),e===u&&(e=function(){let e,r,n,s,o,l,a,c;e=Rn,r=co(),t.substr(Rn,18)===zt?(n=zt,Rn+=18):(n=u,0===Qn&&Wn(xr));n!==u?(s=co(),61===t.charCodeAt(Rn)?(o=h,Rn++):(o=u,0===Qn&&Wn(Oe)),o!==u?(l=co(),a=Xs(),a!==u?(c=co(),zn=e,e={hierarchyQualifier:a}):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u);return e}(),e===u&&(e=function(){let e,r,n,s,o,l,a,c;e=Rn,r=co(),t.substr(Rn,12)===Pt?(n=Pt,Rn+=12):(n=u,0===Qn&&Wn(wr));n!==u?(s=co(),61===t.charCodeAt(Rn)?(o=h,Rn++):(o=u,0===Qn&&Wn(Oe)),o!==u?(l=co(),a=Xs(),a!==u?(c=co(),zn=e,e={nodeProperty:a}):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u);return e}(),e===u&&(e=function(){let e,r,n,s,o,l,a,c;e=Rn,r=co(),t.substr(Rn,6)===qt?(n=qt,Rn+=6):(n=u,0===Qn&&Wn($r));n!==u?(s=co(),61===t.charCodeAt(Rn)?(o=h,Rn++):(o=u,0===Qn&&Wn(Oe)),o!==u?(l=co(),a=eo(),a!==u?(c=co(),zn=e,e={levels:a}):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u);return e}(),e===u&&(e=function(){let e,r,n,s,o,l,a,c,i,f,A,p,d,C,g;e=Rn,r=co(),t.substr(Rn,12)===Ht?(n=Ht,Rn+=12):(n=u,0===Qn&&Wn(Lr));if(n!==u)if(s=co(),61===t.charCodeAt(Rn)?(o=h,Rn++):(o=u,0===Qn&&Wn(Oe)),o!==u)if(l=co(),91===t.charCodeAt(Rn)?(a=q,Rn++):(a=u,0===Qn&&Wn(du)),a!==u)if(c=co(),i=Gs(),i!==u){for(f=[],A=Rn,p=co(),d=oo(),d!==u?(C=co(),g=Gs(),g!==u?(zn=A,A=_n(0,g)):(Rn=A,A=u)):(Rn=A,A=u);A!==u;)f.push(A),A=Rn,p=co(),d=oo(),d!==u?(C=co(),g=Gs(),g!==u?(zn=A,A=_n(0,g)):(Rn=A,A=u)):(Rn=A,A=u);93===t.charCodeAt(Rn)?(A=H,Rn++):(A=u,0===Qn&&Wn(Cu)),A!==u?(zn=e,E=f,e={expandLevels:[i,...E]}):(Rn=e,e=u)}else Rn=e,e=u;else Rn=e,e=u;else Rn=e,e=u;else Rn=e,e=u;var E;return e}())))),e}function Gs(){let e,r,n,s,o,l,a,c,i,f,h;var A,p;return e=Rn,r=co(),123===t.charCodeAt(Rn)?(n=ot,Rn++):(n=u,0===Qn&&Wn(Ru)),n!==u?(s=co(),o=Js(),o!==u?(l=co(),44===t.charCodeAt(Rn)?(a=P,Rn++):(a=u,0===Qn&&Wn(pu)),a!==u?(c=co(),i=Js(),i!==u?(f=co(),125===t.charCodeAt(Rn)?(h=lt,Rn++):(h=u,0===Qn&&Wn(Pu)),h!==u?(zn=e,A=o,p=i,e=Object.assign(A,p)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u),e}function Js(){let e,r,n,s,o,l;return e=Rn,t.substr(Rn,8)===Mt?(r=Mt,Rn+=8):(r=u,0===Qn&&Wn(Sr)),r!==u?(n=co(),58===t.charCodeAt(Rn)?(s=k,Rn++):(s=u,0===Qn&&Wn(ou)),s!==u?(o=co(),l=Ys(),l!==u?(zn=e,e={nodeID:l}):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u),e===u&&(e=Rn,t.substr(Rn,8)===Qt?(r=Qt,Rn+=8):(r=u,0===Qn&&Wn(Tr)),r!==u?(n=co(),58===t.charCodeAt(Rn)?(s=k,Rn++):(s=u,0===Qn&&Wn(ou)),s!==u?(o=co(),l=function(){let t,e;t=Rn,e=eo(),e!==u&&(zn=t);t=e,t===u&&(t=Rn,e=Ts(),e!==u&&(zn=t,e=null),t=e);return t}(),l!==u?(zn=e,e={levels:l}):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u)),e}function Ks(){let e,r,n,s,l,a,c,i,f,h,A,p,d,C,g,E,b,F,m,B,v,y,D;var x;return e=Rn,r=lo(),r!==u?(n=co(),t.substr(Rn,6)===Rt?(s=Rt,Rn+=6):(s=u,0===Qn&&Wn(Dr)),s!==u?(l=rs(),l!==u?(a=co(),c=oo(),c!==u?(i=co(),f=uo(),f!==u?(h=co(),A=oo(),A!==u?(p=co(),d=uo(),d!==u?(C=co(),g=oo(),g===u&&(g=null),E=function(){let e,r,n,s,l,a,c,i;if(e=Rn,r=Vs(),r!==u){for(n=[],s=Rn,l=co(),47===t.charCodeAt(Rn)?(a=o,Rn++):(a=u,0===Qn&&Wn(we)),a!==u?(c=co(),i=Vs(),i!==u?(zn=s,s=Nn(0,i)):(Rn=s,s=u)):(Rn=s,s=u);s!==u;)n.push(s),s=Rn,l=co(),47===t.charCodeAt(Rn)?(a=o,Rn++):(a=u,0===Qn&&Wn(we)),a!==u?(c=co(),i=Vs(),i!==u?(zn=s,s=Nn(0,i)):(Rn=s,s=u)):(Rn=s,s=u);zn=e,f=n,e=[r,...f]}else Rn=e,e=u;var f;return e}(),E===u&&(E=null),b=co(),F=oo(),F===u&&(F=null),m=eo(),m===u&&(m=null),B=co(),v=oo(),v===u&&(v=null),y=function(){let e,r;e=Rn,t.substr(Rn,10)===Kt?(r=Kt,Rn+=10):(r=u,0===Qn&&Wn(Ir));r!==u&&(zn=e,r={keepStart:!0});return e=r,e}(),y===u&&(y=null),D=ao(),D!==u?(zn=e,x=y,e={path:l,hierarchy:f,id:d,nodes:E,distance:m,keepStart:x?.keepStart||!1}):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u),e}function Vs(){let e;return e=function(){let e,r,n,s;e=Rn,t.substr(Rn,7)===Jt?(r=Jt,Rn+=7):(r=u,0===Qn&&Wn(kr));r!==u?(n=hs(),n!==u?(41===t.charCodeAt(Rn)?(s=Gt,Rn++):(s=u,0===Qn&&Wn(Or)),s!==u?(zn=e,e={search:n}):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u);return e}(),e===u&&(e=function(){let e,r,n,s;e=Rn,t.substr(Rn,7)===Ut?(r=Ut,Rn+=7):(r=u,0===Qn&&Wn(jr));r!==u?(n=ps(),n!==u?(41===t.charCodeAt(Rn)?(s=Gt,Rn++):(s=u,0===Qn&&Wn(Or)),s!==u?(zn=e,e={filter:n}):(Rn=e,e=u)):(Rn=e,e=u)):(Rn=e,e=u);return e}()),e}function Ws(){let e,r;return Qn++,e=Rn,t.substr(Rn,4)===Vt?(r=Vt,Rn+=4):(r=u,0===Qn&&Wn(_r)),r===u&&(t.substr(Rn,5)===Wt?(r=Wt,Rn+=5):(r=u,0===Qn&&Wn(Nr))),r!==u&&(zn=e,r="true"===r),e=r,Qn--,e===u&&(r=u,0===Qn&&Wn(Zr)),e}function Xs(){let e,r,n,s,o;if(Qn++,e=Rn,39===t.charCodeAt(Rn)?(r=z,Rn++):(r=u,0===Qn&&Wn(Au)),r!==u){for(n=Rn,s=[],t.substr(Rn,2)===Xt?(o=Xt,Rn+=2):(o=u,0===Qn&&Wn(zr)),o===u&&(o=t.charAt(Rn),Ce.test(o)?Rn++:(o=u,0===Qn&&Wn(Pr)));o!==u;)s.push(o),t.substr(Rn,2)===Xt?(o=Xt,Rn+=2):(o=u,0===Qn&&Wn(zr)),o===u&&(o=t.charAt(Rn),Ce.test(o)?Rn++:(o=u,0===Qn&&Wn(Pr)));n=t.substring(n,Rn),39===t.charCodeAt(Rn)?(s=z,Rn++):(s=u,0===Qn&&Wn(Au)),s!==u?(zn=e,e=n.replace(/''/g,"'")):(Rn=e,e=u)}else Rn=e,e=u;return Qn--,e===u&&(r=u,0===Qn&&Wn(Rr)),e}function Ys(){let e,r,n,s,o;if(Qn++,e=Rn,34===t.charCodeAt(Rn)?(r=T,Rn++):(r=u,0===Qn&&Wn(eu)),r!==u){for(n=Rn,s=[],t.substr(Rn,2)===O?(o=O,Rn+=2):(o=u,0===Qn&&Wn(ru)),o===u&&(t.substr(Rn,2)===j?(o=j,Rn+=2):(o=u,0===Qn&&Wn(uu)),o===u&&(o=t.charAt(Rn),ce.test(o)?Rn++:(o=u,0===Qn&&Wn(nu))));o!==u;)s.push(o),t.substr(Rn,2)===O?(o=O,Rn+=2):(o=u,0===Qn&&Wn(ru)),o===u&&(t.substr(Rn,2)===j?(o=j,Rn+=2):(o=u,0===Qn&&Wn(uu)),o===u&&(o=t.charAt(Rn),ce.test(o)?Rn++:(o=u,0===Qn&&Wn(nu))));n=t.substring(n,Rn),34===t.charCodeAt(Rn)?(s=T,Rn++):(s=u,0===Qn&&Wn(eu)),s!==u?(zn=e,e=n.replace(/\\(["\\])/g,"$1")):(Rn=e,e=u)}else Rn=e,e=u;return Qn--,e===u&&(r=u,0===Qn&&Wn(qr)),e}function to(){let e,r,n,s,o,l,a,c,i,f,h,A,p,d,C,g,E,b,F,m,B,v,y,D,x;if(Qn++,e=Rn,r=Rn,n=Rn,s=[],o=t.charAt(Rn),Ee.test(o)?Rn++:(o=u,0===Qn&&Wn(Ur)),o!==u)for(;o!==u;)s.push(o),o=t.charAt(Rn),Ee.test(o)?Rn++:(o=u,0===Qn&&Wn(Ur));else s=u;if(s!==u)if(45===t.charCodeAt(Rn)?(o=W,Rn++):(o=u,0===Qn&&Wn(xu)),o!==u)if(l=t.charAt(Rn),Ee.test(l)?Rn++:(l=u,0===Qn&&Wn(Ur)),l!==u)if(a=t.charAt(Rn),Ee.test(a)?Rn++:(a=u,0===Qn&&Wn(Ur)),a!==u)if(45===t.charCodeAt(Rn)?(c=W,Rn++):(c=u,0===Qn&&Wn(xu)),c!==u)if(i=t.charAt(Rn),Ee.test(i)?Rn++:(i=u,0===Qn&&Wn(Ur)),i!==u)if(f=t.charAt(Rn),Ee.test(f)?Rn++:(f=u,0===Qn&&Wn(Ur)),f!==u){if(h=Rn,84===t.charCodeAt(Rn)?(A=Yt,Rn++):(A=u,0===Qn&&Wn(Jr)),A!==u)if(p=t.charAt(Rn),Ee.test(p)?Rn++:(p=u,0===Qn&&Wn(Ur)),p!==u)if(d=t.charAt(Rn),Ee.test(d)?Rn++:(d=u,0===Qn&&Wn(Ur)),d!==u)if(58===t.charCodeAt(Rn)?(C=k,Rn++):(C=u,0===Qn&&Wn(ou)),C!==u)if(g=t.charAt(Rn),Ee.test(g)?Rn++:(g=u,0===Qn&&Wn(Ur)),g!==u)if(E=t.charAt(Rn),Ee.test(E)?Rn++:(E=u,0===Qn&&Wn(Ur)),E!==u){if(b=Rn,58===t.charCodeAt(Rn)?(F=k,Rn++):(F=u,0===Qn&&Wn(ou)),F!==u)if(m=t.charAt(Rn),Ee.test(m)?Rn++:(m=u,0===Qn&&Wn(Ur)),m!==u)if(B=t.charAt(Rn),Ee.test(B)?Rn++:(B=u,0===Qn&&Wn(Ur)),B!==u){if(v=Rn,46===t.charCodeAt(Rn)?(y=te,Rn++):(y=u,0===Qn&&Wn(Kr)),y!==u){if(D=[],x=t.charAt(Rn),Ee.test(x)?Rn++:(x=u,0===Qn&&Wn(Ur)),x!==u)for(;x!==u;)D.push(x),x=t.charAt(Rn),Ee.test(x)?Rn++:(x=u,0===Qn&&Wn(Ur));else D=u;D!==u?(y=[y,D],v=y):(Rn=v,v=u)}else Rn=v,v=u;v===u&&(v=null),F=[F,m,B,v],b=F}else Rn=b,b=u;else Rn=b,b=u;else Rn=b,b=u;b===u&&(b=null),90===t.charCodeAt(Rn)?(F=ee,Rn++):(F=u,0===Qn&&Wn(Vr)),F===u&&(F=Rn,m=t.charAt(Rn),be.test(m)?Rn++:(m=u,0===Qn&&Wn(Wr)),m!==u?(B=t.charAt(Rn),Ee.test(B)?Rn++:(B=u,0===Qn&&Wn(Ur)),B!==u?(v=t.charAt(Rn),Ee.test(v)?Rn++:(v=u,0===Qn&&Wn(Ur)),v!==u?(58===t.charCodeAt(Rn)?(y=k,Rn++):(y=u,0===Qn&&Wn(ou)),y!==u?(D=t.charAt(Rn),Ee.test(D)?Rn++:(D=u,0===Qn&&Wn(Ur)),D!==u?(x=t.charAt(Rn),Ee.test(x)?Rn++:(x=u,0===Qn&&Wn(Ur)),x!==u?(m=[m,B,v,y,D,x],F=m):(Rn=F,F=u)):(Rn=F,F=u)):(Rn=F,F=u)):(Rn=F,F=u)):(Rn=F,F=u)):(Rn=F,F=u)),F===u&&(F=null),A=[A,p,d,C,g,E,b,F],h=A}else Rn=h,h=u;else Rn=h,h=u;else Rn=h,h=u;else Rn=h,h=u;else Rn=h,h=u;else Rn=h,h=u;h===u&&(h=null),s=[s,o,l,a,c,i,f,h],n=s}else Rn=n,n=u;else Rn=n,n=u;else Rn=n,n=u;else Rn=n,n=u;else Rn=n,n=u;else Rn=n,n=u;else Rn=n,n=u;return r=n!==u?t.substring(r,Rn):n,r!==u&&(zn=e,r=function(t){if(t.split("-")[0].length>4)throw Object.assign(new Error(`The type Edm.DateTimeOffset is not compatible with "${t}"`),{statusCode:400});return t}(r)),e=r,Qn--,e===u&&(r=u,0===Qn&&Wn(Gr)),e}function eo(){let e,r,n,s,o,l;if(Qn++,e=Rn,r=Rn,n=Rn,s=t.charAt(Rn),be.test(s)?Rn++:(s=u,0===Qn&&Wn(Wr)),s===u&&(s=null),o=[],l=t.charAt(Rn),Ee.test(l)?Rn++:(l=u,0===Qn&&Wn(Ur)),l!==u)for(;l!==u;)o.push(l),l=t.charAt(Rn),Ee.test(l)?Rn++:(l=u,0===Qn&&Wn(Ur));else o=u;return o!==u?(s=[s,o],n=s):(Rn=n,n=u),r=n!==u?t.substring(r,Rn):n,r!==u&&(zn=e,r=parseInt(r)),e=r,Qn--,e===u&&(r=u,0===Qn&&Wn(tn)),e}function uo(){let e,r,n,s,o,l,a,c;if(Qn++,e=Rn,r=Rn,Qn++,n=Ws(),Qn--,n===u?r=void 0:(Rn=r,r=u),r!==u)if(n=Rn,Qn++,s=ro(),Qn--,s===u?n=void 0:(Rn=n,n=u),n!==u){if(s=Rn,o=Rn,l=t.charAt(Rn),Fe.test(l)?Rn++:(l=u,0===Qn&&Wn(un)),l!==u){for(a=[],c=t.charAt(Rn),me.test(c)?Rn++:(c=u,0===Qn&&Wn(rn));c!==u;)a.push(c),c=t.charAt(Rn),me.test(c)?Rn++:(c=u,0===Qn&&Wn(rn));l=[l,a],o=l}else Rn=o,o=u;s=o!==u?t.substring(s,Rn):o,s!==u?(zn=e,e=s):(Rn=e,e=u)}else Rn=e,e=u;else Rn=e,e=u;return Qn--,e===u&&(r=u,0===Qn&&Wn(en)),e}function ro(){let e,r,n,s,o,l,a,c,i,f,h,A,p,d;return Qn++,e=Rn,r=Rn,n=no(),n!==u?(s=no(),s!==u?(45===t.charCodeAt(Rn)?(o=W,Rn++):(o=u,0===Qn&&Wn(xu)),o===u&&(o=null),l=no(),l!==u?(45===t.charCodeAt(Rn)?(a=W,Rn++):(a=u,0===Qn&&Wn(xu)),a===u&&(a=null),c=no(),c!==u?(45===t.charCodeAt(Rn)?(i=W,Rn++):(i=u,0===Qn&&Wn(xu)),i===u&&(i=null),f=no(),f!==u?(45===t.charCodeAt(Rn)?(h=W,Rn++):(h=u,0===Qn&&Wn(xu)),h===u&&(h=null),A=no(),A!==u?(p=no(),p!==u?(d=no(),d!==u?(n=[n,s,o,l,a,c,i,f,h,A,p,d],r=n):(Rn=r,r=u)):(Rn=r,r=u)):(Rn=r,r=u)):(Rn=r,r=u)):(Rn=r,r=u)):(Rn=r,r=u)):(Rn=r,r=u)):(Rn=r,r=u),e=r!==u?t.substring(e,Rn):r,Qn--,e===u&&(r=u,0===Qn&&Wn(nn)),e}function no(){let e,r,n,s,o,l;return Qn++,e=Rn,r=Rn,n=t.charAt(Rn),Be.test(n)?Rn++:(n=u,0===Qn&&Wn(on)),n!==u?(s=t.charAt(Rn),Be.test(s)?Rn++:(s=u,0===Qn&&Wn(on)),s!==u?(o=t.charAt(Rn),Be.test(o)?Rn++:(o=u,0===Qn&&Wn(on)),o!==u?(l=t.charAt(Rn),Be.test(l)?Rn++:(l=u,0===Qn&&Wn(on)),l!==u?(n=[n,s,o,l],r=n):(Rn=r,r=u)):(Rn=r,r=u)):(Rn=r,r=u)):(Rn=r,r=u),e=r!==u?t.substring(e,Rn):r,Qn--,e===u&&(r=u,0===Qn&&Wn(sn)),e}function so(){let e,r,n,s;if(e=Rn,r=Rn,n=[],s=t.charAt(Rn),ve.test(s)?Rn++:(s=u,0===Qn&&Wn(ln)),s!==u)for(;s!==u;)n.push(s),s=t.charAt(Rn),ve.test(s)?Rn++:(s=u,0===Qn&&Wn(ln));else n=u;return r=n!==u?t.substring(r,Rn):n,r!==u&&(zn=e,r={val:r}),e=r,e}function oo(){let e,r,n,s;return e=Rn,r=co(),44===t.charCodeAt(Rn)?(n=P,Rn++):(n=u,0===Qn&&Wn(pu)),n!==u?(s=co(),r=[r,n,s],e=r):(Rn=e,e=u),e}function lo(){let e,r,n,s;return e=Rn,r=co(),40===t.charCodeAt(Rn)?(n=se,Rn++):(n=u,0===Qn&&Wn(pn)),n!==u?(s=co(),r=[r,n,s],e=r):(Rn=e,e=u),e}function ao(){let e,r,n;return e=Rn,r=co(),41===t.charCodeAt(Rn)?(n=Gt,Rn++):(n=u,0===Qn&&Wn(Or)),n!==u?(r=[r,n],e=r):(Rn=e,e=u),e}function co(){let e,r,n;for(Qn++,e=Rn,r=[],n=t.charAt(Rn),xe.test(n)?Rn++:(n=u,0===Qn&&Wn(dn));n!==u;)r.push(n),n=t.charAt(Rn),xe.test(n)?Rn++:(n=u,0===Qn&&Wn(dn));return e=t.substring(e,Rn),Qn--,e}function io(){let e,r,n;if(Qn++,e=Rn,r=[],n=t.charAt(Rn),xe.test(n)?Rn++:(n=u,0===Qn&&Wn(dn)),n!==u)for(;n!==u;)r.push(n),n=t.charAt(Rn),xe.test(n)?Rn++:(n=u,0===Qn&&Wn(dn));else r=u;return e=r!==u?t.substring(e,Rn):r,Qn--,e===u&&(r=u,0===Qn&&Wn(Cn)),e}const fo=["$value"],ho={eq:"=",ne:"!=",lt:"<",gt:">",le:"<=",ge:">="},Ao={topcount:!0,bottomcount:!0,topsum:!1,bottomsum:!1,toppercent:!1,bottompercent:!1},po=Object.assign,{strict:Co,minimal:go}=e,Eo=[];let bo,Fo;const mo=e.safeNumber||function(t){if("string"!=typeof t)return t;const e=parseFloat(t);if(!isNaN(e)&&String(e)===t)return e;const u=parseInt(t);return isNaN(u)||String(u)!==t.replace(/^-?\d+\.0+$/,t.split(".")[0])?t:u},Bo=e.skipToken,vo=e.standardBase64||function(t){return Buffer.from(t,"base64").toString("base64")},yo=t=>e=>t===e||t.as&&e.as&&t.as===e.as||e.as&&t.ref&&e.as===t.ref[t.ref.length-1]||t.ref&&e.ref&&t.ref.join("")===e.ref.join(""),Do=t=>e=>{if(Array.isArray(e))return e.map(Do(t));const u=e.ref&&t.find(t=>"func"in t&&t.as&&t.as===e.ref[0]);return u||e},xo=t=>e=>Array.isArray(e)?e.map(xo(t)):e.ref&&!t.find(yo(e))?{val:null}:e,wo=(t,e)=>{if(1===e.ref.length)t.find(yo(e))||t.push(e);else{const u=e.ref.shift(),r=t.find(t=>t.ref&&t.ref[0]===u);if(r)wo(r.expand??=[],e);else{const r={ref:[u],expand:[]};wo(r.expand,e),t.push(r)}}},$o=t=>{const e=t.reduce((t,e)=>{if("string"==typeof e)return t[e]??=[],t;if(!e.ref)return t;const u=e.ref[0];return t[u]??=[],t[u].push(...e.expand??[]),t},{}),u=[];for(const t in e){if("*"===t){u.push(t);continue}const r={ref:[t]};e[t].length&&(r.expand=$o(e[t])),u.push(r)}return u},Lo=(t,e)=>{if(!e.length)return;const u=e.reduce((t,e)=>{if(!e.ref)return t;const u=e.ref[0];return t[u]??=[],t[u].push(...e.expand??[]),t},{}),r={},n=[];for(const e in t){const s=t[e],o=s.ref?.[0];Object.keys(u).includes(o)?r[o]=s:s.func||n.push(e)}if(Object.keys(r).length){for(const e of n)t.splice(e,1);for(const t in u){const e=r[t];e&&(u[t].length&&(e.expand?Lo(e.expand,u[t]):e.expand=$o(u[t])))}}},So=(t,e)=>{let u=jo({from:t.from},e);if(delete t.apply,Array.isArray(u))for(let e=0;e<u.length;e++)u[e]=To(u[e],t);else u=u.SELECT?.recurse&&t.where?To({SELECT:{from:u}},t):To(u,t);return u};const To=(t,e)=>{const u=function(t){return t.SELECT.groupBy||t.SELECT.columns?.some(t=>t&&"object"==typeof t&&"func"in t)}(t);if(e.columns&&"$count"===e.columns[0].as||!u&&e.where&&(t.SELECT.where||t.SELECT.limit)||t.SELECT.limit&&e.limit||t.SELECT.orderBy&&e.orderBy||t.SELECT.search&&e.search){const u=Object.assign({},e);u.from=t,t={SELECT:u}}else{let r=t.SELECT.from,n=t.SELECT.columns,s=t.SELECT.where;if(t.SELECT=Object.assign(t.SELECT,e),t.SELECT.from=r,t.SELECT.columns=n,u&&e.where){const u=e.where.map(Do(t.SELECT.columns)).map(xo(t.SELECT.groupBy??[]));t.SELECT.having?t.SELECT.having=[{xpr:t.SELECT.having},"and",{xpr:u}]:t.SELECT.having=u,t.SELECT.where=s}}if(e.columns){const u=[];if(t.SELECT.columns||(t.SELECT.columns=[]),t.SELECT.columns.length&&u.push(...t.SELECT.columns),t.SELECT.groupBy&&t.SELECT.groupBy.length)Lo(u,e.columns);else for(const t of e.columns)u.some(yo(t))||u.push(t);t.SELECT.columns=u}return t.SELECT.columns?.length||delete t.SELECT.columns,t},jo=(t,e)=>{delete t.apply,e.identity&&t.from.SELECT&&(t=t.from.SELECT),e.apply&&(t.from={SELECT:{...t}});const u=t=>{t.recurse={ref:["parent"]};const u=[],r=[];if(e.topLevels.levels?r.push([{ref:["DistanceFromRoot"]},"<=",{val:e.topLevels.levels-1}]):r.push([{ref:["DistanceFromRoot"]},">=",{val:0}]),e.topLevels.expandLevels)for(const t of e.topLevels.expandLevels)0===t.levels?u.push([{func:"DistanceTo",args:[{val:t.nodeID},{val:null}]}]):r.push([{func:"DistanceTo",args:[{val:t.nodeID},{val:t.levels}]}]);const n=">="===r[0][1]&&0===r[0][2].val?1===r.length?[]:[r[0]]:r,s=n.flatMap((t,e)=>e<n.length-1?[...t,"or"]:t);if(u.length){const e=u.flatMap((t,e)=>["and","not",...t]);n.length>1?t.recurse.where=[{xpr:s}].concat(e):1===n.length&&">="===n[0][1]&&0===n[0][2].val?t.recurse.where=e.slice(1):t.recurse.where=s.concat(e)}else s.length&&(t.recurse.where=s)},r=t=>n(t,e.descendants,1),n=(t,u=e.ancestors,r=-1)=>{if(u.nodes)for(const e of u.nodes)e.filter&&-1===r?t.where=e.filter:e.search&&(t.search=e.search);if(t.recurse={ref:["parent"]},1===r){const e=()=>{const t=new Error("For descendants, only the following filter is supported: `<ID> eq <val>`");throw t.statusCode=400,t};1===u.nodes?.length&&u.nodes[0].filter||e();const n=u.nodes[0].filter.findIndex(t=>t.ref?.[0]===u.id);-1===!n&&e();const s=u.nodes[0].filter[n+1],o=u.nodes[0].filter[n+2]?.val;"="===s&&o||e();const l=u.distance&&r*u.distance,a=[{func:"DistanceTo",args:[{val:o},{val:Number.isInteger(l)?l:null}]}];t.recurse.where=a}};if(e.ancestors&&e.topLevels){n(t);const e={...t};u(e),t.recurse=e.recurse}else if(e.ancestors&&e.descendants){n(t);const e={...t};r(e),t.recurse=e.recurse}else e.topLevels?u(t):e.ancestors?n(e):e.descendants&&r(t);if(e.where&&(t.where=e.where),e.search&&(t.search=e.search),e.limit&&(t.limit=e.limit),e.orderBy&&(t.orderBy=e.orderBy),e.groupBy&&(t.groupBy=e.groupBy.reduce((t,e)=>(t.some(yo(e))||t.push(e),t),[])),e.aggregate&&e.aggregate.length&&(t.columns=(t.columns||[]).concat(e.aggregate)),t.groupBy&&t.groupBy.length){const e=t.groupBy.reduce((t,e)=>{if(e.ref&&e.ref.length>1){const u={ref:[...e.ref]};e.expand&&e.expand.length&&(u.expand=[...e.expand]),e.as&&(u.as=e.as),wo(t,u,!0)}else t.push({...e});return t},[]);t.columns=(t.columns||[]).concat(e)}if(e.having&&(t.having=e.having.map(Do(t.columns)).map(xo(t.groupBy??[]))),e.apply&&jo(t.from.SELECT,e.apply),Array.isArray(e.concat)){const u=[],r=1===Object.keys(t).length?t.from:{SELECT:t};for(let t of e.concat)if(t.from=r,t.apply){const e=jo(t,t.apply);Array.isArray(e)?u.push(...e):u.push(e)}return u}return{SELECT:t}},Oo=t=>{bo.limit&&bo.limit.offset&&bo.limit.offset.val&&(t+=bo.limit.offset.val),(bo.limit||(bo.limit={})).offset={val:t}},ko=(t,e=!1)=>{bo.orderBy=bo.orderBy?e?[t,...bo.orderBy]:[...bo.orderBy,t]:[t]},Io=(t,e)=>{for(const u of e)u.ref&&u.ref[0]===t&&u.ref.shift(),u.func&&Io(t,u.args),u.xpr&&Io(t,u.xpr);return e},Zo=(t,e)=>{"null"===e?e=null:"true"===e?e=!0:"false"===e&&(e=!1);let u=bo.from._params??={},r=t.match(/^(\w+)\[(.*)\]$/);for(;r;)r[1]in u||(u[r[1]]=""===r[2]?[]:{}),u=u[r[1]],r=(t=r[2]).match(/^(\w+)\[(.*)\]$/);Array.isArray(u)?u.push(e):u[t]=e},_o=(t,e,u,r=!1)=>{let n=!1;return t?.forEach(t=>{t.val===e?(t.val="list"in u?u.list.map(t=>t.val):u.val,n=!0):t.list===e?(t.list=u.list,n=!0):t.func?t.args.forEach((t,s)=>{t.val===e?(t.val=u.val,n=!0):t.func&&_o(t.args,e,u,r)}):t.SELECT&&No(t.SELECT,e,u,r)}),n},No=(t,e,u,r=!1)=>{let n=!1;const{where:s,from:o}=t;return n=_o(s,e,u),o?.ref?.forEach(t=>{n=_o(t.where,e,u,!0)}),n},Ro=(t,e)=>{for(let u=0;u<t.length;u++)if(t[u].ref&&t[u].ref.at(-1)===e.as&&(e.xpr||e.ref||e.val))return t[u]=e,!0;return!1},zo=(t,e,u)=>{if(!t||!e.length)return;const r=t=>{if(t.ref&&e.includes(t.ref.at(-1))){const e=new Error(`Computed property "${t.ref.at(-1)}" cannot be used in ${u}. Computed properties are only supported in $select`);throw e.statusCode=501,e}Array.isArray(t.xpr)&&t.xpr.forEach(r),Array.isArray(t.args)&&t.args.forEach(r)};Array.isArray(t)?t.forEach(r):r(t)},Po=t=>{(t=>{const e=t.compute.map(t=>t.as);t.where&&zo(t.where,e,"$filter"),t.orderBy&&zo(t.orderBy,e,"$orderby")})(t);for(const e of t.compute)if(t.columns){Ro(t.columns,e)||t.columns.push(e)}else t.columns=["*"],t.columns.push(e);delete t.compute};qn=s();const qo=qn!==u&&Rn===t.length;function Ho(){throw qn!==u&&Rn<t.length&&Wn({type:"end"}),Xn(Mn,Hn<t.length?function(e=Rn){const u=t.codePointAt(e);return void 0===u?"":String.fromCodePoint(u)}(Hn):null,Hn<t.length?Vn(Hn,Hn+1):Vn(Hn,Hn))}return e.peg$library?{peg$result:qn,peg$currPos:Rn,peg$FAILED:u,peg$maxFailExpected:Mn,peg$maxFailPos:Hn,peg$success:qo,peg$throw:qo?void 0:Ho}:qo?qn:void Ho()}module.exports={StartRules:["ODataRelativeURI"],SyntaxError:peg$SyntaxError,parse:peg$parse};
